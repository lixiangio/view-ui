import{defineComponent as g,resolveComponent as p,openBlock as o,createElementBlock as h,Fragment as v,createVNode as P,Transition as L,withCtx as d,normalizeStyle as y,withModifiers as I,createBlock as r,resolveDynamicComponent as m,normalizeProps as _,guardReactiveProps as b,createCommentVNode as u,createElementVNode as w,inject as B,getCurrentInstance as N,shallowReactive as E,defineAsyncComponent as S}from"/view-ui/libs/vue.js";import{createStyle as f,importComponent as D}from"/view-ui/libs/view.js";import{_ as $}from"./export-helper.js";function C(e,t,s){f(t);const{app:n,pages:a}=t;if(n){const{style:i,transition:l="fade"}=n;s.style=i,s.transition=l}a&&e&&(s.inlinePage=a[e])}const V=g({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,open:!1,style:void 0,inlinePage:void 0,transition:void 0},{page:n}=this;return n.__asyncLoader===void 0?C(e,n,s):n.__asyncLoader().then(a=>C(e,a,this)),s},methods:{back(){const{$parent:e}=this;e.inlinePage=void 0,e.subPaths=[]}},watch:{paths(e){const{app:t,pages:s}=this.page;if(this.style=t?t.style:null,s){const[n,...a]=e,i=s[n];if(i){f(i),this.subPaths=a,this.inlinePage=i;return}}this.subPaths=[],this.inlinePage=void 0}},mounted(){this.open=!0}});function j(e,t,s,n,a,i){const l=p("Inline",!0);return o(),h(v,null,[P(L,{name:e.transition,onAfterLeave:e.back},{default:d(()=>[e.open?(o(),h("div",{key:0,class:"page scroll-y",style:y(e.style),onBack:t[0]||(t[0]=I(c=>e.open=!1,["stop"]))},[(o(),r(m(e.page),_(b(e.attrs)),null,16))],36)):u("",!0)]),_:1},8,["name","onAfterLeave"]),e.inlinePage?(o(),r(l,{key:0,page:e.inlinePage,paths:e.subPaths},null,8,["page","paths"])):u("",!0)],64)}const z=$(V,[["render",j],["__scopeId","data-v-5c1f81c5"]]);function k(e,t,s){f(t),s.open=!0;const{app:n,pages:a}=t;s.style=n?n.style:null,a&&e&&(s.splitPage=a[e])}const R=g({inject:["container"],props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,level:100,open:!1,style:void 0,splitPage:void 0,subAttrs:void 0,currentAttrs:void 0};e?s.subAttrs=this.attrs:s.currentAttrs=this.attrs;const{page:n}=this;return n.__asyncLoader?n.__asyncLoader().then(a=>k(e,a,this)):k(e,n,s),s},methods:{afterLeave(){const{$parent:e}=this;e.splitPage=void 0,e.subPaths=[]}},watch:{paths(e){const[t,...s]=e,{app:n,pages:a}=this.page;if(this.style=n?n.style:null,t&&a){const i=a[t];if(i){f(i),this.subAttrs=this.attrs,this.subPaths=s,this.splitPage=i;return}else this.currentAttrs=this.attrs}else this.currentAttrs=this.attrs;this.subPaths=[],this.splitPage=void 0}},mounted(){const{container:e}=this;e.app.flex===!0?e.app.flex=!1:this.splitPage===void 0&&e.split&&this.$nextTick(()=>{const t=e.$refs.mount.childElementCount*100;t>e.level&&e.setLevel(t)})},unmounted(){if(this.splitPage===void 0){const{container:e}=this;if(e.split){const t=e.$refs.mount.childElementCount*100;t<e.level&&e.setLevel(t)}}}});function T(e,t,s,n,a,i){const l=p("container"),c=p("Child",!0);return o(),h(v,null,[P(L,{name:"fade",onAfterLeave:e.afterLeave},{default:d(()=>[e.open?(o(),r(l,{key:0,class:"child-container",style:y(e.style),level:e.level},{default:d(()=>[w("div",{class:"page scroll-y",onBack:t[0]||(t[0]=I(A=>e.open=!1,["stop"]))},[(o(),r(m(e.page),_(b(e.currentAttrs)),null,16))],32)]),_:1},8,["style","level"])):u("",!0)]),_:1},8,["onAfterLeave"]),e.splitPage?(o(),r(c,{key:0,paths:e.subPaths,page:e.splitPage,attrs:e.subAttrs},null,8,["paths","page","attrs"])):u("",!0)],64)}const F=$(R,[["render",T],["__scopeId","data-v-dbfddf43"]]),M=S(()=>D("404")),q=g({props:["entry","pages","paths","style"],components:{Inline:z,Child:F},setup({paths:e,pages:t}){const[s,...n]=e;B("router").pagesInstance=N().ctx;const a={subPaths:n,attrs:void 0,subAttrs:void 0,splitPage:void 0,inlinePage:void 0};if(s){const i=t[s];i?i.inline===!0?a.inlinePage=i:a.splitPage=i:(a.subPaths=[],a.splitPage=M)}return E(a)},methods:{router(e,t){const{pages:s}=this,[n,...a]=e,i=s[n];i?(this.subAttrs=t,this.subPaths=a,i.__asyncLoader?i.__asyncLoader().then(l=>{s[n]=l,i.inline===!0?this.inlinePage=l:this.splitPage=l}):i.inline===!0?this.inlinePage=i:this.splitPage=i):(this.subPaths=[],this.attrs=t,this.subAttrs=void 0,this.inlinePage=void 0,this.splitPage=void 0)}}});const G={class:"page scroll-y"};function H(e,t,s,n,a,i){const l=p("Inline"),c=p("container"),A=p("Child");return o(),h(v,null,[P(c,{class:"entry-container",style:y(e.style),level:"100"},{default:d(()=>[w("div",G,[(o(),r(m(e.entry),_(b(e.attrs)),null,16))]),e.inlinePage?(o(),r(l,{key:0,page:e.inlinePage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):u("",!0)]),_:1},8,["style"]),e.splitPage?(o(),r(A,{key:0,page:e.splitPage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):(o(),r(c,{key:1,class:"child-container empty"}))],64)}const Q=$(q,[["render",H],["__scopeId","data-v-aab9ab08"]]);export{Q as S};

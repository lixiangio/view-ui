import{defineComponent as X,ref as C,reactive as x,onMounted as ae,createApp as re,unref as L,openBlock as u,createElementBlock as k,normalizeStyle as N,resolveComponent as F,Fragment as z,createVNode as W,Transition as V,withCtx as I,withModifiers as ce,createBlock as b,resolveDynamicComponent as J,normalizeProps as fe,guardReactiveProps as pe,createCommentVNode as P,createElementVNode as g,shallowReactive as Le,shallowRef as Ae,getCurrentInstance as Ce,nextTick as U,normalizeClass as S,toDisplayString as T,renderList as ee,createTextVNode as Z,pushScopeId as Se,popScopeId as ze,defineAsyncComponent as Ee,withDirectives as Me,vShow as Ie}from"/view-ui/libs/vue.js";import v,{importAsyncComponent as K,instances as y,gap as M,addStyle as te,asyncComponent404 as Oe,baseURL as Fe,Lang as he,widths as O,minAppWidith as D,getLevel as se,events as G,Langs as Re,getChildOptions as me,urlHistory as ie,getAppOptions as Te,extendsOptions as De,UA as Be,urls as Ne}from"/view-ui/libs/view.js";import{controlbar as B,overview as H,openApp as Xe,addHistory as we,apps as E,appsState as A,controllerSwitch as ve,maskOptions as je,closeMask as We,maskState as ge,openMask as Ve}from"/view-ui/libs/state.js";import ue,{IFrame as Ye}from"/view-ui/libs/components.js";import{_ as Y}from"../export-helper.js";import{_ as qe}from"../index.js";import ke,{DisableEvent as Ge,MaskStyle as le,isTouch as oe,screenHeight as He,getLastPointer as Ue}from"/view-ui/libs/pointer.js";import Qe,{getRightBaseLine as Q,getMinMove as Ke}from"/view-ui/libs/swiper.js";import{open as Je,openBlank as Ze,closeInstance as xe}from"/view-ui/libs/navigator.js";import{message as ye}from"/view-ui/libs/viewui.js";import et from"/view-ui/libs/router.js";import"/view-ui/libs/network.js";const tt=["src"],st=X({__name:"Main",setup(e){const t=C(),s=x({}),{iframe:l,src:o}=v.initOptions.main;return l===void 0&&ae(()=>{K(o||"main/default").then(n=>{if(n.style&&Object.assign(s,n.style),n.install)n.install(t.value);else{const i=re(n);i.use(ue),i.mount(t.value)}})}),(n,i)=>L(l)?(u(),k("iframe",{key:0,class:"main",src:L(l),frameborder:"0",style:N(s)},null,12,tt)):(u(),k("section",{key:1,class:"main",style:N(s),ref_key:"mount",ref:t},null,4))}});const it=Y(st,[["__scopeId","data-v-ed4a90f8"]]);function nt(e){const t=new ke(e);t.use(Qe(e,{inertia:4}));let s="",l;t.on("start",n=>{if(s="",l=void 0,"validity"in n.target)return Ge();const{startX:i}=t;for(const p in y){const f=y[p],{left:r,width:a}=f,c=r+a;if(i>r&&i<c){l=f;break}}v.instance=l}),t.on("lock",()=>{if(l&&t.dir==="Y")if(B.value===!1&&l.displays===!1)s="scroll";else{s="drag",le.cursor="move",t.lastX=t.startX,t.lastY=t.startY,Object.assign(l.$el.style,{zIndex:100,transition:"unset"}),t.initLeft=l.left;for(const n in y){const i=y[n];i!==l&&Object.assign(i.$el.style,{zIndex:"",transition:""})}}}),t.on("vertical",n=>{if(s==="drag"){const{clientX:i,clientY:p}=n,f=i-t.startX+t.initLeft,r=p-t.startY;l.$el.style.transform=`translate3d(${f}px, ${r}px, 0)`;const a=l.width+M,{lastX:c}=t;if(i>c)for(const h in y){const d=y[h];if(d===l)continue;const m=d.left+d.width/2;c<m&&i>=m&&(d.left-=a,d.$el.style.transform=`translate3d(${d.left}px, 0, 0)`,l.left=d.left+d.width+M)}else if(i<c)for(const h in y){const d=y[h];if(d===l)continue;const m=d.left+d.width/2;c>m&&i<=m&&(l.left=d.left,d.left+=a,d.$el.style.transform=`translate3d(${d.left}px, 0, 0)`)}t.lastX=i,t.lastY=p}});let o;oe===!1&&(t.on("lock",n=>{if(s==="scroll"){let i=n.target;for(;i;){if(i.classList.contains("scroll-y")){o=i;break}const{parentElement:p}=i;if(p)i=p;else{o=i;break}}o.classList.add("scrollbar")}}),t.on("vertical",n=>{if(s==="scroll"&&o){const{scrollTop:i}=o,{move:p}=t;if(p)o.scroll(0,i-p);else{const{screenY:f}=n;f===0?o.scroll(0,i+12):f===He&&o.scroll(0,i-12)}}}),t.on("end",()=>{s==="scroll"&&o&&(o.classList.remove("scrollbar"),o=void 0)})),t.on("end",()=>{if(s==="drag"){const{style:n}=l.$el;Object.assign(n,{transition:"",transform:`translate3d(${l.left}px, 0, 0)`})}}),t.on("click",({target:n})=>{H.value?(H.value=!1,e.style.transformOrigin=`${t.clientX}px 50%`):n.getAttribute("event")==="mask"?B.value=!B.value:n===e&&(B.value=!1)}),v.appsPointer=t}function _e(e,t,s){te(t);const{app:l,pages:o}=t;if(l){const{style:n,transition:i="fade"}=l;s.style=n,s.transition=i}o&&e&&(s.inlinePage=o[e])}const lt=X({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,open:!1,style:void 0,inlinePage:void 0,transition:void 0},{page:l}=this;return l.__asyncLoader===void 0?_e(e,l,s):l.__asyncLoader().then(o=>_e(e,o,this)),s},methods:{back(){const{$parent:e}=this;e.inlinePage=void 0,e.subPaths=[]}},watch:{paths(e){const{app:t,pages:s}=this.page;if(this.style=t?t.style:null,s){const[l,...o]=e,n=s[l];if(n){te(n),this.subPaths=o,this.inlinePage=n;return}}this.subPaths=[],this.inlinePage=void 0}},mounted(){this.open=!0}});function ot(e,t,s,l,o,n){const i=F("Inline",!0);return u(),k(z,null,[W(V,{name:e.transition,onAfterLeave:e.back},{default:I(()=>[e.open?(u(),k("div",{key:0,class:"page scroll-y",style:N(e.style),onBack:t[0]||(t[0]=ce(p=>e.open=!1,["stop"]))},[(u(),b(J(e.page),fe(pe(e.attrs)),null,16))],36)):P("",!0)]),_:1},8,["name","onAfterLeave"]),e.inlinePage?(u(),b(i,{key:0,page:e.inlinePage,paths:e.subPaths},null,8,["page","paths"])):P("",!0)],64)}const at=Y(lt,[["render",ot],["__scopeId","data-v-d37c3044"]]);function $e(e,t,s){te(t),s.open=!0;const{app:l,pages:o}=t;s.style=l?l.style:null,o&&e&&(s.splitPage=o[e])}const rt=X({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,level:100,open:!1,style:void 0,splitPage:void 0,subAttrs:void 0,currentAttrs:void 0};e?s.subAttrs=this.attrs:s.currentAttrs=this.attrs;const{page:l}=this;return l.__asyncLoader?l.__asyncLoader().then(o=>$e(e,o,this)):$e(e,l,s),s},methods:{afterLeave(){const{$parent:e}=this;e.splitPage=void 0,e.subPaths=[]}},watch:{paths(e){const[t,...s]=e,{app:l,pages:o}=this.page;if(this.style=l?l.style:null,t&&o){const n=o[t];if(n){te(n),this.subAttrs=this.attrs,this.subPaths=s,this.splitPage=n;return}else this.currentAttrs=this.attrs}else this.currentAttrs=this.attrs;this.subPaths=[],this.splitPage=void 0}},mounted(){const{container:e}=this.$router;e.app.flex===!0?e.app.flex=!1:this.splitPage===void 0&&e.split&&this.$nextTick(()=>{const t=e.$refs.mount.childElementCount*100;t>e.level&&e.setLevel(t)})},unmounted(){if(this.splitPage===void 0){const{container:e}=this.$router;if(e.split){const t=e.$refs.mount.childElementCount*100;t<e.level&&e.setLevel(t)}}}});function ct(e,t,s,l,o,n){const i=F("container"),p=F("Child",!0);return u(),k(z,null,[W(V,{name:"fade",onAfterLeave:e.afterLeave},{default:I(()=>[e.open?(u(),b(i,{key:0,class:"child-container",style:N(e.style),level:e.level},{default:I(()=>[g("div",{class:"page scroll-y",onBack:t[0]||(t[0]=ce(f=>e.open=!1,["stop"]))},[(u(),b(J(e.page),fe(pe(e.currentAttrs)),null,16))],32)]),_:1},8,["style","level"])):P("",!0)]),_:1},8,["onAfterLeave"]),e.splitPage?(u(),b(p,{key:0,paths:e.subPaths,page:e.splitPage,attrs:e.subAttrs},null,8,["paths","page","attrs"])):P("",!0)],64)}const ft=Y(rt,[["render",ct],["__scopeId","data-v-28da857f"]]),pt=X({props:["entry","pages","paths","style"],components:{Inline:at,Child:ft},created(){this.$router.pagesInstance=this},setup({paths:e,pages:t}){const[s,...l]=e,o={subPaths:l,attrs:void 0,subAttrs:void 0,splitPage:void 0,inlinePage:void 0};if(s){const n=t[s];n?n.inline===!0?o.inlinePage=n:o.splitPage=n:(o.subPaths=[],o.splitPage=Oe)}return Le(o)},methods:{router(e,t){const{pages:s}=this,[l,...o]=e,n=s[l];n?(this.subAttrs=t,this.subPaths=o,n.__asyncLoader?n.__asyncLoader().then(i=>{s[l]=i,n.inline===!0?this.inlinePage=i:this.splitPage=i}):n.inline===!0?this.inlinePage=n:this.splitPage=n):(this.subPaths=[],this.attrs=t,this.subAttrs=void 0,this.inlinePage=void 0,this.splitPage=void 0)}}});const ut={class:"page scroll-y"};function dt(e,t,s,l,o,n){const i=F("Inline"),p=F("container"),f=F("Child");return u(),k(z,null,[W(p,{class:"entry-container",style:N(e.style),level:"100"},{default:I(()=>[g("div",ut,[(u(),b(J(e.entry),fe(pe(e.attrs)),null,16))]),e.inlinePage?(u(),b(i,{key:0,page:e.inlinePage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):P("",!0)]),_:1},8,["style"]),e.splitPage?(u(),b(f,{key:0,page:e.splitPage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):(u(),b(p,{key:1,class:"child-container empty"}))],64)}const ht=Y(pt,[["render",dt],["__scopeId","data-v-349e5269"]]),q=Re({QRCode:{en:"Scan Code",zh:"\u4E8C\u7EF4\u7801"},split:{en:"Split Mode",zh:"\u5206\u5C4F\u6A21\u5F0F"},single:{en:"Single Mode",zh:"\u5355\u5C4F\u6A21\u5F0F"},autoScreen:{en:"Auto",zh:"\u81EA\u9002\u5E94"},fullScreen:{en:"Fullscreen",zh:"\u5168\u5C4F\u663E\u793A"},multi:{en:"Multiple",zh:"\u590D\u5236\u5E94\u7528"},copy:{en:"Copy Link",zh:"\u590D\u5236\u94FE\u63A5"},newTab:{en:"New Tab",zh:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00"},reload:{en:"Reload",zh:"\u5237\u65B0"},back:{en:"Back",zh:"\u8FD4\u56DE"},share:{en:"Share",zh:"\u5206\u4EAB"},close:{en:"Close App",zh:"\u5173\u95ED\u5E94\u7528"},drag:{en:"Drag up and down to sort",zh:"\u4E0A\u4E0B\u62D6\u52A8\u6392\u5E8F"}}),mt={100:O[100],200:O[200],300:O[300],400:O[400],500:O[500]},vt=X({components:{IFrame:Ye},props:["options"],setup({options:e}){const{app:t}=e,{split:s=!1,level:l=100,style:o={}}=t,n=Ae(void 0),{ctx:i}=Ce();return{app:t,langs:q,levels:mt,overview:H,controlbar:B,style:x(o),single:C(!0),split:C(s),splitSwitch:C(!1),level:C(l),displays:C(!1),init:C(!1),reload:C(!0),loading:C(!0),maskComponent:n,buttons:[{icon:"ficon-reload",name:q.reload,action(){i.onreload()}},{icon:"ficon-copy",name:q.multi,action(){i.onmulti()}},{icon:"ficon-erweima",name:q.QRCode,action(){i.openMask("mask/qrcode")}},{icon:"ficon-link",name:q.copy,action(){i.oncopy()}},{icon:"ficon-icons_send",name:q.share,action(){i.openMask("mask/share")}}]}},computed:{href(){const{url:e}=this.options;return`${Fe}/#${e}`}},methods:{open:Je,openBlank:Ze,onmulti(){this.multiId?this.multiId++:this.multiId=1;const e={...this.options,referer:this};e.url+=`?mid=${this.multiId}`,Xe(e)},async oncopy(){navigator.clipboard?(await navigator.clipboard.writeText(this.href),ye.success(he({en:`Copy Success\b ${this.href}`,zh:`\u590D\u5236\u6210\u529F\b ${this.href}`}))):ye.error(he({en:"Copy Failed",zh:"\u590D\u5236\u5931\u8D25"}))},onclose(){xe(this)},timeouCloseResize(){const e=oe?3e3:1200;clearTimeout(this.clearTimeouId),this.clearTimeouId=setTimeout(()=>this.displays=!1,e)},clearResizeTimeouID(){clearTimeout(this.clearTimeouId)},closeResizeView(e){this.controlbar?this.controlbar=!1:e.target===e.currentTarget&&(this.displays=!1)},drawer(){this.controlbar=!0},openMask(e){K(e).then(t=>this.maskComponent=t)},closeMask(){this.maskComponent=void 0},context(){return this},setWidth(e){let s=Q()-(this.left+e),l=e-this.width;s<0?l+=s:s=0,this.width=e,this.$el.style.width=`${e}px`;for(const o in y){const n=y[o];n.left>this.left?n.left+=l:n.left+=s;const{style:i}=n.$el;i.transition="",i.transform=`translate3d(${n.left}px, 0, 0)`}},setLevel(e){const t=O[e];this.level=Number(e);const s=this.level/100-1;this.setWidth(t+s)},onSplit(e){this.single||(this.split=e,e?this.setLevel(this.$refs.mount.childElementCount*100):(this.level=100,this.setWidth(D)))},fullScreen(){const{left:e}=v.initOptions.apps,s=Q()-e,l=e-this.left,o=l-(this.width-s);this.width=s,this.level=se(s),this.$el.style.width=`${s}px`;for(const n in y){const i=y[n],{style:p}=i.$el;i.left<=this.left?i.left+=l:i.left+=o,p.transition="",p.transform=`translate3d(${i.left}px, 0, 0)`}},autoScreen(){let e=100;const{app:t}=this;t.iframe?t.level&&(e=t.level):this.split&&(e=this.$refs.mount.childElementCount*100),this.level=e;const s=O[e],l=this.width-s;this.width=s,this.$el.style.width=`${s}px`;for(const o in y){const n=y[o],{style:i}=n.$el;n.left>this.left&&(n.left-=l),i.transition="",i.transform=`translate3d(${n.left}px, 0, 0)`}},autoAlign(){const e=Q(),{left:t}=v.initOptions.apps;t+this.width===e?this.autoScreen():this.fullScreen()},initResize(){let e=0,t=0;const{$apps:s}=v,{style:l}=this.$el,o=new ke(this.$refs.resize,{angle:20});oe===!1&&o.on("start",()=>le.display=""),o.on("lock",()=>{o.dir==="X"?(clearTimeout(this.clearTimeouId),e=this.$el.clientWidth,l.transition="unset",this.originlLeft=this.left,this.displays=!0):(H.value=!0,le.cursor="col-resize",t=o.clientX,s.style.transformOrigin=`${o.clientX}px 50%`,G.emit("sidebar.switch",!1))}),o.on("level",()=>{const{move:i}=o;e+=i;const p=this.originlLeft-this.left;if(e>D){if(p===0)for(const f in y){const r=y[f];r.left>this.left&&(r.left+=i);const{style:a}=r.$el;a.transition="unset",a.transform=`translate3d(${r.left}px, 0, 0)`}else{const f=this.left+this.width+M,r=o.current+8-f;e=o.current-this.originlLeft-8;for(const a in y){const c=y[a];c.left>this.left?c.left+=r:c.left+=p;const{style:h}=c.$el;h.transition="unset",h.transform=`translate3d(${c.left}px, 0, 0)`}}if(l.width=`${e}px`,this.level=se(e),this.width=e,this.single===!1){const{children:f}=this.$refs.mount;for(const r of f){const a=String(se(r.clientWidth));a!==r.getAttribute("level")&&r.setAttribute("level",a)}}}else{const f=Math.ceil(Math.abs((e-D)/15))||1;if(this.width===D)v.swiper.move(i/f);else{this.level=100;const r=D-this.width,c=(i-r)/f,h=c+r;e=D,l.width=`${D}px`,this.width=D;for(const d in y){const m=y[d];m.left>this.originlLeft?m.left+=h:m.left+=c;const{style:w}=m.$el;w.transition="unset",w.transform=`translate3d(${m.left}px, 0, 0)`}}}}),o.on("vertical",i=>{const{current:p,start:f,clientX:r}=o,a=r-t;v.swiper.move(a*3),t=r}),o.on("end",()=>{if(o.dir==="X"){const i=this.originlLeft-this.left;i&&v.swiper.scroll(i),this.timeouCloseResize()}});let n=0;o.on("click",i=>{this.displays=!0,this.controlbar=!1,this.timeouCloseResize(),i.timeStamp-n<300&&this.autoAlign(),n=i.timeStamp})},async onreload(){this.reload=!1,this.loading=!0,await U(),this.reload=!0,await U(),this.createApp&&this.createApp()},onIFrameLoad(e){this.loading=!1,e(this)}},async mounted(){var r;await U(),this.initResize();let e=O[this.level];const t=Q(),{left:s}=v.initOptions.apps,{options:l,app:o}=this,{referer:n}=l;if(n){let a=n.left+n.width+M;const c=t-(a+e);c<0&&(a+=c,v.swiper.scroll(c)),this.left=a>s?a:s}else{const a=Object.values(y);if(a.length){let c,h,d,m=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER;for(const $ of a)$.left<m&&(c=$,m=$.left),$.left>_&&(_=$.left,_+$.width<=t&&(d=$)),$.left>w&&(h=$,w=$.left);if(h.left<0){this.left=s;const $=s-(h.left+h.width+M);v.swiper.scroll($)}else if(d){let $=d.left+d.width+M;const R=t-($+e);R<0&&($+=R,v.swiper.scroll(R)),this.left=$}else{const $=s-c.left;v.swiper.scroll($),this.left=s}}else{const c=(r=v.initOptions.apps)==null?void 0:r.align;this.left=c==="right"?t-e:s}}if(o.flex===!0){const a=O[400],c=t-this.left;c<a?e=c:e=a}this.width=e;const{style:i}=this.$el;i.opacity=0,i.width=`${e}px`,i.transition="unset";const p=this.left-100;i.transform=`translate3d(${p}px, 0, 0)`,requestAnimationFrame(()=>{i.opacity=1,i.transition="",i.transform=`translate3d(${this.left}px, 0, 0)`});const f=e+M;for(const a in y){const c=y[a];c.left>=this.left&&(c.left+=f,Object.assign(c.$el.style,{transition:"",transform:`translate3d(${c.left}px, 0, 0)`}))}if(y[l.url]=this,o.src){const a=await K(o.src);if(a.app){Object.assign(o,a.app);const{name:m,color:w,icon:_}=a.app;m&&(l.name=m),w&&(l.color=w),_&&(l.icon=_)}this.init=!0;const{level:c}=this;let h;const d={instance:this,level:c};if(a.install===void 0){const{pages:m}=a,{style:w}=o;if(m){let{paths:_}=l;_?_.shift():_=[],h={entry:a,pages:m,paths:_,style:w},this.single=!1;let $=!1;for(const R in m){const{__asyncLoader:de,inline:be}=m[R];de?de().then(Pe=>{$===!1&&Pe.inline===void 0&&($=!0,this.split=!0,this.splitSwitch=!0)}):be===void 0&&($=!0)}$&&(this.split=!0,this.splitSwitch=!0),Object.assign(d,ht)}else this.split=!1,Object.assign(d,a),w&&Object.assign(this.style,w);await U(),this.createApp=()=>{this.loading=!1;const _=re(d,h);_.use(ue);const $=this.$refs.mount,R=new et({app:_,options:l,el:$,container:this});this.router=R,_.config.globalProperties.$router=R,_.config.globalProperties.$container=this,this.pages=_.mount($)}}else await U(),this.createApp=()=>{this.loading=!1;const m=this.$refs.mount;a.install(m,{app:this})};this.createApp()}G.emit("opened",l),we(l)}});const j=e=>(Se("data-v-401a7dc5"),e=e(),ze(),e),gt={key:0,class:"titlebar"},yt={class:"title"},_t=["level"],$t={class:"view-resize"},wt=j(()=>g("i",{class:"ficon-auto"},null,-1)),kt=j(()=>g("i",{class:"ficon-fullscreen"},null,-1)),bt=j(()=>g("i",{class:"ficon-pages_outlined"},null,-1)),Pt=j(()=>g("i",{class:"ficon-fenping1"},null,-1)),Lt=j(()=>g("div",{class:"view-mask",event:"mask"},null,-1)),At={class:"header item"},Ct={class:"title"},St=["title"],zt=j(()=>g("i",{class:"ficon-xinchuangkou"},null,-1)),Et=[zt],Mt={key:1,class:"button"},It=j(()=>g("i",{class:"ficon-up"},null,-1)),Ot=[It],Ft={class:"buttons"},Rt=["onClick"],Tt=["title"],Dt=j(()=>g("i",{class:"ficon-cha"},null,-1)),Bt=[Dt],Nt={class:"resize",ref:"resize"};function Xt(e,t,s,l,o,n){const i=F("container"),p=F("IFrame"),f=F("app");return u(),b(f,{class:S({overview:e.overview})},{default:I(()=>[e.overview?(u(),k("div",gt,[g("div",yt,[e.app.icon?(u(),k("i",{key:0,class:S(e.app.icon),style:N({color:e.app.color})},null,6)):P("",!0),g("span",null,T(e.app.name),1)])])):P("",!0),g("div",{class:S(["view",{loading:e.loading}]),style:N(e.style)},[e.reload?(u(),b(V,{key:0,name:"fade",appear:""},{default:I(()=>[e.app.src?(u(),k(z,{key:0},[e.init?(u(),k(z,{key:0},[e.single?(u(),b(i,{key:0,class:"mount scroll-y",level:e.level,ref:"mount",onBack:e.onclose},null,8,["level","onBack"])):(u(),k("div",{key:1,class:S(["mount",[e.split?"flat":"fixed"]]),ref:"mount",onBack:t[0]||(t[0]=(...r)=>e.onclose&&e.onclose(...r))},null,34))],64)):P("",!0)],64)):e.app.iframe?(u(),b(p,{key:1,src:e.app.iframe,gesture:e.app.gesture,onLoad:e.onIFrameLoad},null,8,["src","gesture","onLoad"])):P("",!0)]),_:1})):P("",!0),W(V,{name:"fade",appear:""},{default:I(()=>[e.maskComponent?(u(),b(J(e.maskComponent),{key:0,context:e.context},null,8,["context"])):P("",!0)]),_:1}),g("div",{class:S({controlbar:e.controlbar,displays:e.displays}),onMouseenter:t[10]||(t[10]=(...r)=>e.clearResizeTimeouID&&e.clearResizeTimeouID(...r)),onMouseleave:t[11]||(t[11]=(...r)=>e.timeouCloseResize&&e.timeouCloseResize(...r))},[g("div",{class:"view-display",onClick:t[6]||(t[6]=(...r)=>e.closeResizeView&&e.closeResizeView(...r))},[g("div",{class:"view-levels",onClick:t[1]||(t[1]=r=>e.setLevel(r.target.getAttribute("level")))},[(u(!0),k(z,null,ee(e.levels,(r,a)=>(u(),k("div",{key:a,level:a,class:S({active:a<=e.level})},T(a)+"% ",11,_t))),128))]),g("div",$t,[g("div",{class:"auto-resize",onClick:t[2]||(t[2]=(...r)=>e.autoScreen&&e.autoScreen(...r))},[wt,Z(" "+T(e.langs.autoScreen),1)]),g("div",{class:"full-screen",onClick:t[3]||(t[3]=(...r)=>e.fullScreen&&e.fullScreen(...r))},[kt,Z(" "+T(e.langs.fullScreen),1)])]),e.splitSwitch?(u(),k("div",{key:0,class:S(["view-mode",{split:e.split}])},[g("div",{class:"single-mode",onClick:t[4]||(t[4]=r=>e.onSplit(!1))},[bt,Z(" "+T(e.langs.single),1)]),g("div",{class:"split-mode",onClick:t[5]||(t[5]=r=>e.onSplit(!0))},[Pt,Z(" "+T(e.langs.split),1)])],2)):P("",!0)]),Lt,g("div",{class:"view-drawer",onClick:t[8]||(t[8]=(...r)=>e.drawer&&e.drawer(...r))},[g("div",At,[g("div",Ct,[e.app.icon?(u(),k("i",{key:0,class:S(e.app.icon),style:N({color:e.app.color})},null,6)):P("",!0),g("span",null,T(e.app.name),1)]),e.controlbar?(u(),k("div",{key:0,class:"button",title:e.langs.newTab,onClick:t[7]||(t[7]=r=>e.openBlank(e.options.url))},Et,8,St)):(u(),k("div",Mt,Ot))]),g("div",Ft,[(u(!0),k(z,null,ee(e.buttons,({name:r,icon:a,action:c})=>(u(),k("div",{class:"button",onClick:c},[g("i",{class:S(a)},null,2),g("span",null,T(r),1)],8,Rt))),256))])]),g("div",{class:"bottom-line",title:e.langs.drag},null,8,Tt),g("div",{class:"close",onClick:t[9]||(t[9]=ce((...r)=>e.onclose&&e.onclose(...r),["stop"]))},Bt)],34)],6),g("div",Nt,null,512)]),_:1},8,["class"])}const jt=Y(vt,[["render",Xt],["__scopeId","data-v-401a7dc5"]]),Wt=X({__name:"index",setup(e){const t=Ee(()=>qe(()=>import("./Apps/guide.js"),["platform/split/Apps/guide.js","platform/export-helper.js"])),s=C(!1),{initOptions:l}=v,{apps:o}=l;l.app&&E.push(l);const{urls:n,align:i="left"}=o;if(n)for(const a of n){const c=me(a);c&&!E.includes(c)&&(c.paths=a.split("/"),E.push(c))}if(o.left===void 0&&(o.left=3),ie&&ie.length)for(const a of ie){const c=me(a);c&&!E.includes(c)&&(c.paths=a.split("/"),E.push(c))}E.length===0&&(A.value=!1);function p(){const a={37(){A.value===!1?(A.value=!0,requestAnimationFrame(()=>{v.swiper.move(-1),v.swiper.next()})):(v.swiper.move(-1),v.swiper.next())},39(){A.value===!1?(A.value=!0,requestAnimationFrame(()=>{v.swiper.move(1),v.swiper.previous()})):(v.swiper.move(1),v.swiper.previous())},65(){G.emit("sidebar.switch")},67(){ve()},83(){A.value=!A.value},112(h){h.preventDefault(),s.value=!s.value}};let c;document.addEventListener("keydown",h=>{const{keyCode:d}=h,m=a[d];m&&c===void 0&&(c=d,h.target.validity===void 0&&m(h))}),document.addEventListener("keyup",h=>{c===h.keyCode&&(c=void 0)})}const f=C();ae(()=>{const a=f.value;v.$apps=a,nt(a),p(),localStorage.guideState===void 0&&setTimeout(()=>s.value=!0,2e3)});function r(a){"validity"in a.target||(a.preventDefault(),ve())}return(a,c)=>(u(),k(z,null,[g("div",{class:S(["apps-mask full",{active:L(A)&&L(B),overview:L(A)&&L(H)}])},null,2),W(V,{name:"fade"},{default:I(()=>[Me(g("section",{class:S(["apps split",{control:L(B),overview:L(H),[L(i)]:!0}]),ref_key:"$apps",ref:f,onContextmenu:r},[(u(!0),k(z,null,ee(L(E),h=>(u(),b(jt,{key:h.url,options:h},null,8,["options"]))),128))],34),[[Ie,L(A)]])]),_:1}),W(V,{name:"fade",appear:""},{default:I(()=>[s.value?(u(),b(L(t),{key:0,onClose:c[0]||(c[0]=h=>s.value=!1)})):P("",!0)]),_:1})],64))}});const Vt=Y(Wt,[["__scopeId","data-v-abe14312"]]),Yt=["src"],qt=X({__name:"Mask",setup(e){const t=C(),{src:s,iframe:l}=je.mask;return typeof s=="string"&&ae(()=>{K(s).then(o=>{if(o.install)o.install(t.value);else{const n=re(o,{context(){return{closeMask:We}}});n.use(ue),n.mount(t.value)}})}),(o,n)=>L(l)?(u(),k("iframe",{key:0,class:"mask",src:L(l),frameborder:"0"},null,8,Yt)):(u(),k("section",{key:1,class:"mask",ref_key:"mount",ref:t},null,512))}});const Gt=Y(qt,[["__scopeId","data-v-88a27de4"]]);function ne(e){const{style:t}=e.$el;t.transition="all 0.1s",t.transform=`translate3d(${e.left}px, 20px, 0)`,e.$el.addEventListener("transitionend",()=>{t.transform=`translate3d(${e.left}px, 0, 0)`},{once:!0})}G.on("opening",(e,t,s)=>{var o;A.value===!1&&(A.value=!0);const l=Ue()===v.appsPointer?v.instance:void 0;if(s){const n=v.initOptions.apps,{align:i="left",left:p}=n;if(l){if(l===s)return;requestAnimationFrame(()=>{const f=s.left,r=s.width+M,a=l.left;if(f<a){const c=a-r,h=a-(p+r),d=h>0?0:-h;if(c===f)d?v.swiper.scroll(d):ne(s);else for(const m in y){const w=y[m],{style:_}=w.$el;_.zIndex=1,w.left>f&&w.left<a?w.left-=r:w===s&&(_.zIndex="",w.left=c),w.left+=d,_.transition="",_.transform=`translate3d(${w.left}px, 0, 0)`}}else{const c=Q(),h=a+l.width+M,d=h+s.width;let m=c-d;if(m>0&&(m=0),f===h)m?v.swiper.scroll(m):ne(s);else for(const w in y){const _=y[w],{style:$}=_.$el;$.zIndex=1,_.left>a&&_.left<f?_.left+=r:_===s&&(_.left=h,$.zIndex=""),_.left+=m,$.transition="",$.transform=`translate3d(${_.left}px, 0, 0)`}}})}else{let f;i==="left"?f=p:f=window.innerWidth-n.right-2-s.width;const r=f-s.left;r?requestAnimationFrame(()=>{v.swiper.scroll(r)}):ne(s)}(o=s.router)==null||o.open(e)}else t.referer=l});G.on("closing",e=>{const{$el:t,options:s,left:l}=e;Object.assign(t.style,{opacity:0,zIndex:-1,transition:"",transform:`translate3d(${l-100}px, 0, 0)`});const{container:o,move:n}=Ke();if(o){const i=e.width+M;if(o.left<l)for(const p in y){const f=y[p];f.left>l&&(f.left-=i),f.left+=n;const{style:r}=f.$el;r.transition="",r.transform=`translate3d(${f.left}px, 0, 0)`}else for(const p in y){const f=y[p];f.left<l&&(f.left+=i),f.left+=n;const{style:r}=f.$el;r.transition="",r.transform=`translate3d(${f.left}px, 0, 0)`}}t.addEventListener("transitionend",i=>{if(i.target===t&&i.propertyName==="transform"){const p=E.indexOf(s);E.splice(p,1),E.length===0&&(A.value=!1,B.value=!1)}})});const ls=X({__name:"index",setup(e){const t=x({main:!1,apps:!1}),s=x([]);G.on("vive.init",n=>{o(n),ge.value=!1});function l(){const n=sessionStorage[v.pathname];if(n){const i=n.split(",");for(const p of i){const f=Ne[p];f&&we(f)}}}function o({name:n,brand:i,main:p,apps:f,mask:r,...a}){if(n&&(document.title=`${n} - ${i}`),t.main!==!0&&p){p.style&&Object.assign(document.body.style,p.style),t.main=!0,f&&(t.apps=!0);for(const c in a){const h=a[c];if(h){const{src:d,apply:m}=h;d&&m==="split"&&K(d).then(w=>s.push(w))}}l()}}return v.initDataPromise.then(n=>{const i=Te(v.pathname);v.initOptions=De(i);const{mask:p,...f}=i;p&&Ve(i),o(f)}),Be==="Firefox"&&document.addEventListener("dragstart",n=>n.preventDefault()),(n,i)=>(u(),k(z,null,[t.main?(u(),b(it,{key:0})):P("",!0),t.apps?(u(),b(Vt,{key:1})):P("",!0),(u(!0),k(z,null,ee(s,p=>(u(),b(J(p)))),256)),W(V,{name:"fade"},{default:I(()=>[L(ge)?(u(),b(Gt,{key:0})):P("",!0)]),_:1})],64))}});export{ls as default};

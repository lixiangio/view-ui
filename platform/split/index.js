import{defineComponent as j,ref as z,reactive as J,onMounted as ie,createApp as ne,unref as L,openBlock as d,createElementBlock as k,normalizeStyle as X,resolveComponent as N,Fragment as O,createVNode as W,Transition as V,withCtx as D,withModifiers as le,createBlock as b,resolveDynamicComponent as Z,normalizeProps as oe,guardReactiveProps as ae,createCommentVNode as P,createElementVNode as u,shallowReactive as be,shallowRef as Pe,nextTick as H,normalizeClass as E,toDisplayString as S,renderList as re,createTextVNode as K,pushScopeId as Le,popScopeId as Ce,defineAsyncComponent as Ae,withDirectives as Se,vShow as ze}from"/view-ui/libs/vue.js";import g,{importAsyncComponent as Q,instances as y,gap as I,addStyle as x,asyncComponent404 as Ee,baseURL as Me,Lang as pe,widths as T,minAppWidith as F,getLevel as ee,events as q,Langs as Ie,getChildOptions as ue,urlHistory as te,getAppOptions as Oe,extendsOptions as Fe,UA as Te,urls as De}from"/view-ui/libs/view.js";import{controlbar as B,overview as G,openApp as Re,addHistory as ye,apps as M,appsState as C,controllerSwitch as de,maskOptions as Be,closeMask as Xe,maskState as he,openMask as Ne}from"/view-ui/libs/state.js";import fe,{IFrame as je}from"/view-ui/libs/components.js";import{_ as Y}from"../export-helper.js";import{_ as We}from"../index.js";import $e,{DisableEvent as Ve,Mask as _e,isTouch as Ye,GetPointer as qe}from"/view-ui/libs/pointer.js";import Ge,{getRightBaseLine as U,getMinMove as He}from"/view-ui/libs/swiper.js";import{open as Ue,openBlank as Qe,closeInstance as Ze}from"/view-ui/libs/navigator.js";import{message as me}from"/view-ui/libs/viewui.js";import Ke from"/view-ui/libs/router.js";import"/view-ui/libs/network.js";const Je=["src"],xe=j({__name:"Main",setup(e){const t=z(),s=J({}),{src:i,iframe:l}=g.initOptions.main;return typeof i=="string"&&ie(()=>{Q(i).then(n=>{if(n.style&&Object.assign(s,n.style),n.install)n.install(t.value);else{const a=ne(n);a.use(fe),a.mount(t.value)}})}),(n,a)=>L(l)?(d(),k("iframe",{key:0,class:"main",src:L(l),frameborder:"0",style:X(s)},null,12,Je)):(d(),k("section",{key:1,class:"main",style:X(s),ref_key:"mount",ref:t},null,4))}});const et=Y(xe,[["__scopeId","data-v-7449f076"]]);function tt(e){const t=new $e(e);t.use(Ge(e,{inertia:4}));let s="",i;t.on("start",n=>{if(s="",i=void 0,"validity"in n.target)return Ve();const{startX:a}=t;for(const c in y){const o=y[c],{left:p,width:r}=o,f=p+r;if(a>p&&a<f){i=o;break}}g.instance=i}),t.on("lock",()=>{if(i&&t.dir==="Y")if(B.value===!1&&i.displays===!1)s="scroll";else{s="drag",_e.style.cursor="move",t.lastX=t.startX,t.lastY=t.startY,Object.assign(i.$el.style,{zIndex:100,transition:"unset"}),t.initLeft=i.left;for(const n in y){const a=y[n];a!==i&&Object.assign(a.$el.style,{zIndex:"",transition:""})}}}),t.on("vertical",n=>{if(s==="drag"){const{clientX:a,clientY:c}=n,o=a-t.startX+t.initLeft,p=c-t.startY;i.$el.style.transform=`translate3d(${o}px, ${p}px, 0)`;const r=i.width+I,{lastX:f}=t;if(a>f)for(const m in y){const h=y[m];if(h===i)continue;const v=h.left+h.width/2;f<v&&a>=v&&(h.left-=r,h.$el.style.transform=`translate3d(${h.left}px, 0, 0)`,i.left=h.left+h.width+I)}else if(a<f)for(const m in y){const h=y[m];if(h===i)continue;const v=h.left+h.width/2;f>v&&a<=v&&(i.left=h.left,h.left+=r,h.$el.style.transform=`translate3d(${h.left}px, 0, 0)`)}t.lastX=a,t.lastY=c}});let l;if(Ye===!1){t.on("lock",a=>{if(s==="scroll"){let c=a.target;for(;c;){if(c.classList.contains("scroll-y")){l=c;break}const{parentElement:o}=c;if(o)c=o;else{l=c;break}}l.classList.add("scrollbar")}});const n=window.screen.height-1;t.on("vertical",a=>{if(s==="scroll"&&l){const{scrollTop:c}=l,{move:o}=t;if(o===0){const{screenY:p}=a;p===0?l.scroll(0,c+20):p===n&&l.scroll(0,c-20)}else l.scroll(0,c-o)}}),t.on("end",()=>{s==="scroll"&&l&&(l.classList.remove("scrollbar"),l=void 0)})}t.on("end",()=>{if(s==="drag"){const{style:n}=i.$el;Object.assign(n,{transition:"",transform:`translate3d(${i.left}px, 0, 0)`})}}),t.on("click",({target:n})=>{G.value?(G.value=!1,e.style.transformOrigin=`${t.clientX}px 50%`):n.getAttribute("event")==="mask"?B.value=!B.value:n===e&&(B.value=!1)}),g.appsPointer=t}function ve(e,t,s){x(t);const{app:i,pages:l}=t;if(i){const{style:n,transition:a="fade"}=i;s.style=n,s.transition=a}l&&e&&(s.inlinePage=l[e])}const st=j({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,open:!1,style:void 0,inlinePage:void 0,transition:void 0},{page:i}=this;return i.__asyncLoader===void 0?ve(e,i,s):i.__asyncLoader().then(l=>ve(e,l,this)),s},methods:{back(){const{$parent:e}=this;e.inlinePage=void 0,e.subPaths=[]}},watch:{paths(e){const{app:t,pages:s}=this.page;if(this.style=t?t.style:null,s){const[i,...l]=e,n=s[i];if(n){x(n),this.subPaths=l,this.inlinePage=n;return}}this.subPaths=[],this.inlinePage=void 0}},mounted(){this.open=!0}});function it(e,t,s,i,l,n){const a=N("Inline",!0);return d(),k(O,null,[W(V,{name:e.transition,onAfterLeave:e.back},{default:D(()=>[e.open?(d(),k("div",{key:0,class:"page scroll-y",style:X(e.style),onBack:t[0]||(t[0]=le(c=>e.open=!1,["stop"]))},[(d(),b(Z(e.page),oe(ae(e.attrs)),null,16))],36)):P("",!0)]),_:1},8,["name","onAfterLeave"]),e.inlinePage?(d(),b(a,{key:0,page:e.inlinePage,paths:e.subPaths},null,8,["page","paths"])):P("",!0)],64)}const nt=Y(st,[["render",it],["__scopeId","data-v-d37c3044"]]);function ge(e,t,s){x(t),s.open=!0;const{app:i,pages:l}=t;s.style=i?i.style:null,l&&e&&(s.splitPage=l[e])}const lt=j({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,s={subPaths:t,level:100,open:!1,style:void 0,splitPage:void 0,subAttrs:void 0,currentAttrs:void 0};e?s.subAttrs=this.attrs:s.currentAttrs=this.attrs;const{page:i}=this;return i.__asyncLoader?i.__asyncLoader().then(l=>ge(e,l,this)):ge(e,i,s),s},methods:{afterLeave(){const{$parent:e}=this;e.splitPage=void 0,e.subPaths=[]}},watch:{paths(e){const[t,...s]=e,{app:i,pages:l}=this.page;if(this.style=i?i.style:null,t&&l){const n=l[t];if(n){x(n),this.subAttrs=this.attrs,this.subPaths=s,this.splitPage=n;return}else this.currentAttrs=this.attrs}else this.currentAttrs=this.attrs;this.subPaths=[],this.splitPage=void 0}},mounted(){const{container:e}=this.$router;e.app.flex===!0?e.app.flex=!1:this.splitPage===void 0&&e.split&&this.$nextTick(()=>{const t=e.$refs.mount.childElementCount*100;t>e.level&&e.setLevel(t)})},unmounted(){if(this.splitPage===void 0){const{container:e}=this.$router;if(e.split){const t=e.$refs.mount.childElementCount*100;t<e.level&&e.setLevel(t)}}}});function ot(e,t,s,i,l,n){const a=N("container"),c=N("Child",!0);return d(),k(O,null,[W(V,{name:"fade",onAfterLeave:e.afterLeave},{default:D(()=>[e.open?(d(),b(a,{key:0,class:"child-container",style:X(e.style),level:e.level},{default:D(()=>[u("div",{class:"page scroll-y",onBack:t[0]||(t[0]=le(o=>e.open=!1,["stop"]))},[(d(),b(Z(e.page),oe(ae(e.currentAttrs)),null,16))],32)]),_:1},8,["style","level"])):P("",!0)]),_:1},8,["onAfterLeave"]),e.splitPage?(d(),b(c,{key:0,paths:e.subPaths,page:e.splitPage,attrs:e.subAttrs},null,8,["paths","page","attrs"])):P("",!0)],64)}const at=Y(lt,[["render",ot],["__scopeId","data-v-28da857f"]]),rt=j({props:["entry","pages","paths","style"],components:{Inline:nt,Child:at},created(){this.$router.pagesInstance=this},setup({paths:e,pages:t}){const[s,...i]=e,l={subPaths:i,attrs:void 0,subAttrs:void 0,splitPage:void 0,inlinePage:void 0};if(s){const n=t[s];n?n.inline===!0?l.inlinePage=n:l.splitPage=n:(l.subPaths=[],l.splitPage=Ee)}return be(l)},methods:{router(e,t){const{pages:s}=this,[i,...l]=e,n=s[i];n?(this.subAttrs=t,this.subPaths=l,n.__asyncLoader?n.__asyncLoader().then(a=>{s[i]=a,n.inline===!0?this.inlinePage=a:this.splitPage=a}):n.inline===!0?this.inlinePage=n:this.splitPage=n):(this.subPaths=[],this.attrs=t,this.subAttrs=void 0,this.inlinePage=void 0,this.splitPage=void 0)}}});const ft={class:"page scroll-y"};function ct(e,t,s,i,l,n){const a=N("Inline"),c=N("container"),o=N("Child");return d(),k(O,null,[W(c,{class:"entry-container",style:X(e.style),level:"100"},{default:D(()=>[u("div",ft,[(d(),b(Z(e.entry),oe(ae(e.attrs)),null,16))]),e.inlinePage?(d(),b(a,{key:0,page:e.inlinePage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):P("",!0)]),_:1},8,["style"]),e.splitPage?(d(),b(o,{key:0,page:e.splitPage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):(d(),b(c,{key:1,class:"child-container empty"}))],64)}const pt=Y(rt,[["render",ct],["__scopeId","data-v-349e5269"]]),ut=Ie({QRCode:{en:"Scan Code",zh:"\u4E8C\u7EF4\u7801"},split:{en:"Split Mode",zh:"\u5206\u5C4F\u6A21\u5F0F"},single:{en:"Single Mode",zh:"\u5355\u5C4F\u6A21\u5F0F"},autoScreen:{en:"Auto",zh:"\u81EA\u9002\u5E94"},fullScreen:{en:"Full Screen",zh:"\u5168\u5C4F\u663E\u793A"},multi:{en:"Multiple",zh:"\u590D\u5236\u5E94\u7528"},copy:{en:"Copy Link",zh:"\u590D\u5236\u94FE\u63A5"},newTab:{en:"New Tab",zh:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00"},reload:{en:"Reload",zh:"\u5237\u65B0"},back:{en:"Back",zh:"\u8FD4\u56DE"},share:{en:"Share",zh:"\u5206\u4EAB"},close:{en:"Close App",zh:"\u5173\u95ED\u5E94\u7528"},drag:{en:"Drag up and down to sort",zh:"\u4E0A\u4E0B\u62D6\u52A8\u6392\u5E8F"}}),dt={100:T[100],200:T[200],300:T[300],400:T[400],500:T[500]},ht=j({components:{IFrame:je},props:["options"],setup({options:e}){const{app:t}=e,{split:s=!1,level:i=100,style:l={}}=t;return{app:t,langs:ut,levels:dt,overview:G,controlbar:B,style:J(l),single:z(!0),split:z(s),splitSwitch:z(!1),level:z(i),displays:z(!1),init:z(!1),reload:z(!0),loading:z(!0),maskComponent:Pe(void 0)}},computed:{href(){const{url:e}=this.options;return`${Me}/#${e}`}},methods:{open:Ue,openBlank:Qe,onmulti(){this.multiId?this.multiId++:this.multiId=1;const e={...this.options,referer:this};e.url+=`?mid=${this.multiId}`,Re(e)},async oncopy(){navigator.clipboard?(await navigator.clipboard.writeText(this.href),me.success(pe({en:`Copy Success\b ${this.href}`,zh:`\u590D\u5236\u6210\u529F\b ${this.href}`}))):me.error(pe({en:"Copy Failed",zh:"\u590D\u5236\u5931\u8D25"}))},onclose(){Ze(this)},timeouCloseResize(){clearTimeout(this.clearTimeouId),this.clearTimeouId=setTimeout(()=>this.displays=!1,1200)},clearResizeTimeouID(){clearTimeout(this.clearTimeouId)},closeResizeView(e){this.controlbar?this.controlbar=!1:e.target===e.currentTarget&&(this.displays=!1)},drawer(){this.controlbar=!0},openMask(e){Q(e).then(t=>this.maskComponent=t)},closeMask(){this.maskComponent=void 0},context(){return this},setWidth(e){let s=U()-(this.left+e),i=e-this.width;s<0?i+=s:s=0,this.width=e,this.$el.style.width=`${e}px`;for(const l in y){const n=y[l];n.left>this.left?n.left+=i:n.left+=s;const{style:a}=n.$el;a.transition="",a.transform=`translate3d(${n.left}px, 0, 0)`}},setLevel(e){const t=T[e];this.level=Number(e);const s=this.level/100-1;this.setWidth(t+s)},onSplit(e){this.single||(this.split=e,e?this.setLevel(this.$refs.mount.childElementCount*100):(this.level=100,this.setWidth(F)))},fullScreen(){const{left:e}=g.initOptions.apps,s=U()-e,i=e-this.left,l=i-(this.width-s);this.width=s,this.level=ee(s),this.$el.style.width=`${s}px`;for(const n in y){const a=y[n],{style:c}=a.$el;a.left<=this.left?a.left+=i:a.left+=l,c.transition="",c.transform=`translate3d(${a.left}px, 0, 0)`}},autoScreen(){let e=100;const{app:t}=this;t.iframe?t.level&&(e=t.level):this.split&&(e=this.$refs.mount.childElementCount*100),this.level=e;const s=T[e],i=this.width-s;this.width=s,this.$el.style.width=`${s}px`;for(const l in y){const n=y[l],{style:a}=n.$el;n.left>this.left&&(n.left-=i),a.transition="",a.transform=`translate3d(${n.left}px, 0, 0)`}},autoAlign(){const e=U(),{left:t}=g.initOptions.apps;t+this.width===e?this.autoScreen():this.fullScreen()},initZoombar(){let e=0,t=0;const{$apps:s}=g,{style:i}=this.$el,l=new $e(this.$refs.zoombar,{angle:20});l.on("lock",()=>{l.dir==="X"?(clearTimeout(this.clearTimeouId),e=this.$el.clientWidth,i.transition="unset",this.originlLeft=this.left,this.displays=!0):(G.value=!0,_e.style.cursor="col-resize",t=l.clientX,s.style.transformOrigin=`${l.clientX}px 50%`,q.emit("sidebar.switch",!1))}),l.on("level",()=>{const{move:a}=l;e+=a;const c=this.originlLeft-this.left;if(e>F){if(c===0)for(const o in y){const p=y[o];p.left>this.left&&(p.left+=a);const{style:r}=p.$el;r.transition="unset",r.transform=`translate3d(${p.left}px, 0, 0)`}else{const o=this.left+this.width+I,p=l.current+8-o;e=l.current-this.originlLeft-8;for(const r in y){const f=y[r];f.left>this.left?f.left+=p:f.left+=c;const{style:m}=f.$el;m.transition="unset",m.transform=`translate3d(${f.left}px, 0, 0)`}}if(i.width=`${e}px`,this.level=ee(e),this.width=e,this.single===!1){const{children:o}=this.$refs.mount;for(const p of o){const r=String(ee(p.clientWidth));r!==p.getAttribute("level")&&p.setAttribute("level",r)}}}else{const o=Math.ceil(Math.abs((e-F)/15))||1;if(this.width===F)g.swiper.move(a/o);else{this.level=100;const p=F-this.width,f=(a-p)/o,m=f+p;e=F,i.width=`${F}px`,this.width=F;for(const h in y){const v=y[h];v.left>this.originlLeft?v.left+=m:v.left+=f;const{style:w}=v.$el;w.transition="unset",w.transform=`translate3d(${v.left}px, 0, 0)`}}}}),l.on("vertical",a=>{const{current:c,start:o,clientX:p}=l,r=p-t;g.swiper.move(r*3),t=p}),l.on("end",()=>{if(l.dir==="X"){const a=this.originlLeft-this.left;a&&g.swiper.scroll(a),this.timeouCloseResize()}});let n=0;l.on("click",a=>{console.log("click"),this.displays=!0,this.controlbar=!1,this.timeouCloseResize(),a.timeStamp-n<300&&this.autoAlign(),n=a.timeStamp})},async onreload(){this.reload=!1,this.loading=!0,await H(),this.reload=!0,await H(),this.createApp&&this.createApp()},onIFrameLoad(e){this.loading=!1,e(this)}},async mounted(){var p;await H(),this.initZoombar();let e=T[this.level];const t=U(),{left:s}=g.initOptions.apps,{options:i,app:l}=this,{referer:n}=i;if(n){let r=n.left+n.width+I;const f=t-(r+e);f<0&&(r+=f,g.swiper.scroll(f)),this.left=r>s?r:s}else{const r=Object.values(y);if(r.length){let f,m,h,v=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER;for(const $ of r)$.left<v&&(f=$,v=$.left),$.left>_&&(_=$.left,_+$.width<=t&&(h=$)),$.left>w&&(m=$,w=$.left);if(m.left<0){this.left=s;const $=s-(m.left+m.width+I);g.swiper.scroll($)}else if(h){let $=h.left+h.width+I;const R=t-($+e);R<0&&($+=R,g.swiper.scroll(R)),this.left=$}else{const $=s-f.left;g.swiper.scroll($),this.left=s}}else{const f=(p=g.initOptions.apps)==null?void 0:p.align;this.left=f==="right"?t-e:s}}if(l.flex===!0){const r=T[400],f=t-this.left;f<r?e=f:e=r}this.width=e;const{style:a}=this.$el;a.opacity=0,a.width=`${e}px`,a.transition="unset";const c=this.left+200;a.transform=`translate3d(${c}px, 0, 0)`,requestAnimationFrame(()=>{a.opacity=1,a.transition="",a.transform=`translate3d(${this.left}px, 0, 0)`});const o=e+I;for(const r in y){const f=y[r];f.left>=this.left&&(f.left+=o,Object.assign(f.$el.style,{transition:"",transform:`translate3d(${f.left}px, 0, 0)`}))}if(y[i.url]=this,l.src){const r=await Q(l.src);if(delete r.name,r.app){Object.assign(l,r.app);const{name:v,color:w,icon:_}=r.app;v&&(i.name=v),w&&(i.color=w),_&&(i.icon=_)}this.init=!0;const{level:f}=this;let m;const h={instance:this,level:f};if(r.install===void 0){const{pages:v}=r,{style:w}=l;if(v){let{paths:_}=i;_?_.shift():_=[],m={entry:r,pages:v,paths:_,style:w},this.single=!1;let $=!1;for(const R in v){const{__asyncLoader:ce,inline:we}=v[R];ce?ce().then(ke=>{$===!1&&ke.inline===void 0&&($=!0,this.split=!0,this.splitSwitch=!0)}):we===void 0&&($=!0)}$&&(this.split=!0,this.splitSwitch=!0),Object.assign(h,pt)}else this.split=!1,Object.assign(h,r),w&&Object.assign(this.style,w);await H(),this.createApp=()=>{this.loading=!1;const _=ne(h,m);_.use(fe);const $=this.$refs.mount,R=new Ke({app:_,options:i,el:$,container:this});this.router=R,_.config.globalProperties.$router=R,this.pages=_.mount($)}}else await H(),this.createApp=()=>{this.loading=!1;const v=this.$refs.mount;r.install(v,{app:this})};this.createApp()}q.emit("opened",i),ye(i)}});const A=e=>(Le("data-v-b29c9aa2"),e=e(),Ce(),e),mt={key:0,class:"titlebar"},vt={class:"title"},gt=["level"],yt={class:"view-resize"},$t=A(()=>u("i",{class:"ficon-auto"},null,-1)),_t=A(()=>u("i",{class:"ficon-fullscreen"},null,-1)),wt=A(()=>u("i",{class:"ficon-pages_outlined"},null,-1)),kt=A(()=>u("i",{class:"ficon-fenping1"},null,-1)),bt=A(()=>u("div",{class:"view-mask",event:"mask"},null,-1)),Pt={class:"header item"},Lt={class:"title"},Ct=["title"],At=A(()=>u("i",{class:"ficon-xinchuangkou"},null,-1)),St=[At],zt={key:1,class:"button"},Et=A(()=>u("i",{class:"ficon-up"},null,-1)),Mt=[Et],It={class:"buttons"},Ot=A(()=>u("i",{class:"ficon-reload"},null,-1)),Ft=A(()=>u("i",{class:"ficon-copy"},null,-1)),Tt=A(()=>u("i",{class:"ficon-erweima"},null,-1)),Dt=A(()=>u("i",{class:"ficon-link"},null,-1)),Rt=A(()=>u("i",{class:"ficon-icons_send"},null,-1)),Bt=["title"],Xt=A(()=>u("i",{class:"ficon-cha"},null,-1)),Nt=[Xt],jt={class:"zoombar",ref:"zoombar"};function Wt(e,t,s,i,l,n){const a=N("container"),c=N("IFrame");return d(),k("section",{class:E(["app",{overview:e.overview}])},[e.overview?(d(),k("div",mt,[u("div",vt,[e.app.icon?(d(),k("i",{key:0,class:E(e.app.icon),style:X({color:e.app.color})},null,6)):P("",!0),u("span",null,S(e.app.name),1)])])):P("",!0),u("div",{class:E(["view",{loading:e.loading}]),style:X(e.style)},[e.reload?(d(),b(V,{key:0,name:"fade",appear:""},{default:D(()=>[e.app.src?(d(),k(O,{key:0},[e.init?(d(),k(O,{key:0},[e.single?(d(),b(a,{key:0,class:"mount scroll-y",level:e.level,ref:"mount",onBack:e.onclose},null,8,["level","onBack"])):(d(),k("div",{key:1,class:E(["mount",[e.split?"flat":"fixed"]]),ref:"mount",onBack:t[0]||(t[0]=(...o)=>e.onclose&&e.onclose(...o))},null,34))],64)):P("",!0)],64)):e.app.iframe?(d(),b(c,{key:1,src:e.app.iframe,gesture:e.app.gesture,onLoad:e.onIFrameLoad},null,8,["src","gesture","onLoad"])):P("",!0)]),_:1})):P("",!0),W(V,{name:"fade",appear:""},{default:D(()=>[e.maskComponent?(d(),b(Z(e.maskComponent),{key:0,context:e.context},null,8,["context"])):P("",!0)]),_:1}),u("div",{class:E({controlbar:e.controlbar,displays:e.displays}),onMouseenter:t[15]||(t[15]=(...o)=>e.clearResizeTimeouID&&e.clearResizeTimeouID(...o)),onMouseleave:t[16]||(t[16]=(...o)=>e.timeouCloseResize&&e.timeouCloseResize(...o))},[u("div",{class:"view-display",onClick:t[6]||(t[6]=(...o)=>e.closeResizeView&&e.closeResizeView(...o))},[u("div",{class:"view-levels",onClick:t[1]||(t[1]=o=>e.setLevel(o.target.getAttribute("level")))},[(d(!0),k(O,null,re(e.levels,(o,p)=>(d(),k("div",{key:p,level:p,class:E({active:p<=e.level})},S(p)+"% ",11,gt))),128))]),u("div",yt,[u("div",{class:"auto-resize",onClick:t[2]||(t[2]=(...o)=>e.autoScreen&&e.autoScreen(...o))},[$t,K(" "+S(e.langs.autoScreen),1)]),u("div",{class:"full-screen",onClick:t[3]||(t[3]=(...o)=>e.fullScreen&&e.fullScreen(...o))},[_t,K(" "+S(e.langs.fullScreen),1)])]),e.splitSwitch?(d(),k("div",{key:0,class:E(["view-mode",{split:e.split}])},[u("div",{class:"single-mode",onClick:t[4]||(t[4]=o=>e.onSplit(!1))},[wt,K(" "+S(e.langs.single),1)]),u("div",{class:"split-mode",onClick:t[5]||(t[5]=o=>e.onSplit(!0))},[kt,K(" "+S(e.langs.split),1)])],2)):P("",!0)]),bt,u("div",{class:"view-drawer",onClick:t[13]||(t[13]=(...o)=>e.drawer&&e.drawer(...o))},[u("div",Pt,[u("div",Lt,[e.app.icon?(d(),k("i",{key:0,class:E(e.app.icon),style:X({color:e.app.color})},null,6)):P("",!0),u("span",null,S(e.app.name),1)]),e.controlbar?(d(),k("div",{key:0,class:"button",title:e.langs.newTab,onClick:t[7]||(t[7]=o=>e.openBlank(e.options.url))},St,8,Ct)):(d(),k("div",zt,Mt))]),u("div",It,[u("div",{class:"button",onClick:t[8]||(t[8]=(...o)=>e.onreload&&e.onreload(...o))},[Ot,u("span",null,S(e.langs.reload),1)]),u("div",{class:"button",onClick:t[9]||(t[9]=(...o)=>e.onmulti&&e.onmulti(...o))},[Ft,u("span",null,S(e.langs.multi),1)]),u("div",{class:"button",onClick:t[10]||(t[10]=o=>e.openMask("mask/qrcode"))},[Tt,u("span",null,S(e.langs.QRCode),1)]),u("div",{class:"button",onClick:t[11]||(t[11]=(...o)=>e.oncopy&&e.oncopy(...o))},[Dt,u("span",null,S(e.langs.copy),1)]),u("div",{class:"button",onClick:t[12]||(t[12]=o=>e.openMask("mask/share"))},[Rt,u("span",null,S(e.langs.share),1)])])]),u("div",{class:"bottom-line",title:e.langs.drag},null,8,Bt),u("div",{class:"close",onClick:t[14]||(t[14]=le((...o)=>e.onclose&&e.onclose(...o),["stop"]))},Nt)],34)],6),u("div",jt,null,512)],2)}const Vt=Y(ht,[["render",Wt],["__scopeId","data-v-b29c9aa2"]]),Yt=j({__name:"index",setup(e){const t=Ae(()=>We(()=>import("./Apps/guide.js"),["platform/split/Apps/guide.js","platform/export-helper.js"])),s=z(!1),{initOptions:i}=g,{apps:l}=i;i.app&&M.push(i);const{urls:n,align:a="left"}=l;if(n)for(const r of n){const f=ue(r);f&&!M.includes(f)&&(f.paths=r.split("/"),M.push(f))}if(l.left===void 0&&(l.left=3),te&&te.length)for(const r of te){const f=ue(r);f&&!M.includes(f)&&(f.paths=r.split("/"),M.push(f))}M.length===0&&(C.value=!1);function c(){const r={37(){C.value===!1?(C.value=!0,requestAnimationFrame(()=>{g.swiper.move(-1),g.swiper.next()})):(g.swiper.move(-1),g.swiper.next())},39(){C.value===!1?(C.value=!0,requestAnimationFrame(()=>{g.swiper.move(1),g.swiper.previous()})):(g.swiper.move(1),g.swiper.previous())},65(){q.emit("sidebar.switch")},67(){de()},83(){C.value=!C.value},112(m){m.preventDefault(),s.value=!s.value}};let f;document.addEventListener("keydown",m=>{const{keyCode:h}=m,v=r[h];v&&f===void 0&&(f=h,m.target.validity===void 0&&v(m))}),document.addEventListener("keyup",m=>{f===m.keyCode&&(f=void 0)})}const o=z();ie(()=>{const r=o.value;g.$apps=r,tt(r),c(),localStorage.guideState===void 0&&setTimeout(()=>s.value=!0,2e3)});function p(r){"validity"in r.target||(r.preventDefault(),de())}return(r,f)=>(d(),k(O,null,[u("div",{class:E(["apps-mask full",{active:L(C)&&L(B),overview:L(C)&&L(G)}])},null,2),W(V,{name:"fade"},{default:D(()=>[Se(u("section",{class:E(["apps split",{control:L(B),overview:L(G),[L(a)]:!0}]),ref_key:"$apps",ref:o,onContextmenu:p},[(d(!0),k(O,null,re(L(M),m=>(d(),b(Vt,{key:m.url,options:m},null,8,["options"]))),128))],34),[[ze,L(C)]])]),_:1}),W(V,{name:"fade",appear:""},{default:D(()=>[s.value?(d(),b(L(t),{key:0,onClose:f[0]||(f[0]=m=>s.value=!1)})):P("",!0)]),_:1})],64))}});const qt=Y(Yt,[["__scopeId","data-v-8edae9d3"]]),Gt=["src"],Ht=j({__name:"Mask",setup(e){const t=z(),{src:s,iframe:i}=Be.mask;return typeof s=="string"&&ie(()=>{Q(s).then(l=>{if(l.install)l.install(t.value);else{const n=ne(l,{context(){return{closeMask:Xe}}});n.use(fe),n.mount(t.value)}})}),(l,n)=>L(i)?(d(),k("iframe",{key:0,class:"mask",src:L(i),frameborder:"0"},null,8,Gt)):(d(),k("section",{key:1,class:"mask",ref_key:"mount",ref:t},null,512))}});const Ut=Y(Ht,[["__scopeId","data-v-88a27de4"]]);function se(e){const{style:t}=e.$el;t.transition="all 0.1s",t.transform=`translate3d(${e.left}px, 20px, 0)`,e.$el.addEventListener("transitionend",()=>{t.transform=`translate3d(${e.left}px, 0, 0)`},{once:!0})}q.on("opening",(e,t,s)=>{var l;C.value===!1&&(C.value=!0);const i=qe()===g.appsPointer?g.instance:void 0;if(s){const n=g.initOptions.apps,{align:a="left",left:c}=n;if(i){if(i===s)return;requestAnimationFrame(()=>{const o=s.left,p=s.width+I,r=i.left;if(o<r){const f=r-p,m=r-(c+p),h=m>0?0:-m;if(f===o)h?g.swiper.scroll(h):se(s);else for(const v in y){const w=y[v],{style:_}=w.$el;_.zIndex=1,w.left>o&&w.left<r?w.left-=p:w===s&&(_.zIndex="",w.left=f),w.left+=h,_.transition="",_.transform=`translate3d(${w.left}px, 0, 0)`}}else{const f=U(),m=r+i.width+I,h=m+s.width;let v=f-h;if(v>0&&(v=0),o===m)v?g.swiper.scroll(v):se(s);else for(const w in y){const _=y[w],{style:$}=_.$el;$.zIndex=1,_.left>r&&_.left<o?_.left+=p:_===s&&(_.left=m,$.zIndex=""),_.left+=v,$.transition="",$.transform=`translate3d(${_.left}px, 0, 0)`}}})}else{let o;a==="left"?o=c:o=window.innerWidth-n.right-2-s.width;const p=o-s.left;p?requestAnimationFrame(()=>{g.swiper.scroll(p)}):se(s)}(l=s.router)==null||l.open(e)}else t.referer=i});q.on("closing",e=>{const{$el:t,options:s,left:i}=e;Object.assign(t.style,{opacity:0,zIndex:-1,transition:"",transform:`translate3d(${i-F}px, 0, 0)`});const{container:l,move:n}=He();if(l){const a=e.width+I;if(l.left<i)for(const c in y){const o=y[c];o.left>i&&(o.left-=a),o.left+=n;const{style:p}=o.$el;p.transition="",p.transform=`translate3d(${o.left}px, 0, 0)`}else for(const c in y){const o=y[c];o.left<i&&(o.left+=a),o.left+=n;const{style:p}=o.$el;p.transition="",p.transform=`translate3d(${o.left}px, 0, 0)`}}t.addEventListener("transitionend",a=>{const c=M.indexOf(s);M.splice(c,1),M.length===0&&(C.value=!1,B.value=!1)},{once:!0,capture:!0})});const as=j({__name:"index",setup(e){const t=J({main:!1,apps:!1}),s=J([]);q.on("vive.init",n=>{l(n),he.value=!1});function i(){const n=sessionStorage[g.pathname];if(n){const a=n.split(",");for(const c of a){const o=De[c];o&&ye(o)}}}function l({name:n,brand:a,main:c,apps:o,mask:p,...r}){if(n&&(document.title=`${n} - ${a}`),t.main!==!0&&c){c.style&&Object.assign(document.body.style,c.style),(c.src||c.iframe)&&(t.main=!0),o&&(t.apps=!0);for(const f in r){const m=r[f];if(m){const{src:h,apply:v}=m;h&&v==="split"&&Q(h).then(w=>s.push(w))}}i()}}return g.initDataPromise.then(n=>{const a=Oe(g.pathname);g.initOptions=Fe(a);const{mask:c,...o}=a;c&&Ne(a),l(o)}),Te==="Firefox"&&document.addEventListener("dragstart",n=>n.preventDefault()),(n,a)=>(d(),k(O,null,[t.main?(d(),b(et,{key:0})):P("",!0),t.apps?(d(),b(qt,{key:1})):P("",!0),(d(!0),k(O,null,re(s,c=>(d(),b(Z(c)))),256)),W(V,{name:"fade"},{default:D(()=>[L(he)?(d(),b(Ut,{key:0})):P("",!0)]),_:1})],64))}});export{as as default};

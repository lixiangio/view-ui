import{_ as ge}from"../../index.js";import{defineComponent as Y,resolveComponent as C,openBlock as f,createElementBlock as b,Fragment as E,createVNode as O,Transition as j,withCtx as I,normalizeStyle as N,withModifiers as se,createBlock as k,resolveDynamicComponent as Q,normalizeProps as ie,guardReactiveProps as ne,createCommentVNode as _,createElementVNode as d,inject as ye,getCurrentInstance as de,shallowReactive as we,shallowRef as $e,reactive as be,ref as S,nextTick as V,createApp as ke,normalizeClass as P,toDisplayString as F,renderList as Z,createTextVNode as G,pushScopeId as _e,popScopeId as Pe,defineAsyncComponent as Ce,onMounted as Le,unref as L,withDirectives as Ae,vShow as Se}from"/view-ui/libs/vue.js";import v,{instances as w,addStyle as K,asyncComponent404 as Ie,baseURL as ze,Lang as oe,importModeComponent as ae,widths as z,minAppWidith as T,getLevel as U,events as x,Langs as Ee,getChildOptions as re,urlHistory as J}from"/view-ui/libs/view.js";import{controlbar as D,overview as W,openApp as Me,addHistory as Fe,apps as B,appsState as A,controllerSwitch as ce}from"/view-ui/libs/state.js";import he,{DisableEvent as Te,MaskStyle as ee,isTouch as te,screenHeight as Re}from"/view-ui/libs/pointer.js";import Be,{getRightBaseLine as H}from"/view-ui/libs/swiper.js";import{open as De,openBlank as Oe,closeInstance as Xe}from"/view-ui/libs/navigator.js";import Ne,{IFrame as je}from"/view-ui/libs/components.js";import{message as pe}from"/view-ui/libs/viewui.js";import We from"/view-ui/libs/router.js";import{_ as q}from"../../export-helper.js";import"/view-ui/libs/network.js";function Ve(e){const t=new he(e);t.use(Be(e,{inertia:4}));let i="",n;t.on("start",o=>{if(i="",n=void 0,"validity"in o.target)return Te();const{startX:s}=t;for(const h in w){const m=w[h],{left:c,width:r}=m,a=c+r;if(s>c&&s<a){n=m;break}}v.instance=n}),t.on("lock",()=>{if(n&&t.dir==="Y")if(D.value===!1&&n.displays===!1)i="scroll";else{i="drag",ee.cursor="move",t.lastX=t.startX,t.lastY=t.startY,Object.assign(n.$el.style,{zIndex:100,transition:"unset"}),t.initLeft=n.left;for(const o in w){const s=w[o];s!==n&&Object.assign(s.$el.style,{zIndex:"",transition:""})}}}),t.on("vertical",o=>{if(i==="drag"){const{clientX:s,clientY:h}=o,m=s-t.startX+t.initLeft,c=h-t.startY;n.$el.style.transform=`translate3d(${m}px, ${c}px, 0)`;const r=n.width,{lastX:a}=t;if(s>a)for(const p in w){const u=w[p];if(u===n)continue;const y=u.left+u.width/2;a<y&&s>=y&&(u.left-=r,u.$el.style.transform=`translate3d(${u.left}px, 0, 0)`,n.left=u.left+u.width)}else if(s<a)for(const p in w){const u=w[p];if(u===n)continue;const y=u.left+u.width/2;a>y&&s<=y&&(n.left=u.left,u.left+=r,u.$el.style.transform=`translate3d(${u.left}px, 0, 0)`)}t.lastX=s,t.lastY=h}});let l;te===!1&&(t.on("lock",o=>{if(i==="scroll"){let s=o.target;for(;s;){if(s.classList.contains("scroll-y")){l=s;break}const{parentElement:h}=s;if(h)s=h;else{l=s;break}}l.classList.add("scrollbar")}}),t.on("vertical",o=>{if(i==="scroll"&&l){const{scrollTop:s}=l,{move:h}=t;if(h)l.scroll(0,s-h);else{const{screenY:m}=o;m===0?l.scroll(0,s+16):m===Re&&l.scroll(0,s-16)}}}),t.on("end",()=>{i==="scroll"&&l&&(l.classList.remove("scrollbar"),l=void 0)})),t.on("end",()=>{if(i==="drag"){const{style:o}=n.$el;Object.assign(o,{transition:"",transform:`translate3d(${n.left}px, 0, 0)`})}}),t.on("click",({target:o})=>{W.value?(W.value=!1,e.style.transformOrigin=`${t.clientX}px 50%`):o.getAttribute("event")==="mask"?D.value=!D.value:o===e&&(D.value=!1)}),v.appsPointer=t}function ue(e,t,i){K(t);const{app:n,pages:l}=t;if(n){const{style:o,transition:s="fade"}=n;i.style=o,i.transition=s}l&&e&&(i.inlinePage=l[e])}const Ye=Y({props:["page","paths","attrs"],data(){const[e,...t]=this.paths,i={subPaths:t,open:!1,style:void 0,inlinePage:void 0,transition:void 0},{page:n}=this;return n.__asyncLoader===void 0?ue(e,n,i):n.__asyncLoader().then(l=>ue(e,l,this)),i},methods:{back(){const{$parent:e}=this;e.inlinePage=void 0,e.subPaths=[]}},watch:{paths(e){const{app:t,pages:i}=this.page;if(this.style=t?t.style:null,i){const[n,...l]=e,o=i[n];if(o){K(o),this.subPaths=l,this.inlinePage=o;return}}this.subPaths=[],this.inlinePage=void 0}},mounted(){this.open=!0}});function qe(e,t,i,n,l,o){const s=C("Inline",!0);return f(),b(E,null,[O(j,{name:e.transition,onAfterLeave:e.back},{default:I(()=>[e.open?(f(),b("div",{key:0,class:"page scroll-y",style:N(e.style),onBack:t[0]||(t[0]=se(h=>e.open=!1,["stop"]))},[(f(),k(Q(e.page),ie(ne(e.attrs)),null,16))],36)):_("",!0)]),_:1},8,["name","onAfterLeave"]),e.inlinePage?(f(),k(s,{key:0,page:e.inlinePage,paths:e.subPaths},null,8,["page","paths"])):_("",!0)],64)}const Ge=q(Ye,[["render",qe],["__scopeId","data-v-ceaf951f"]]);function fe(e,t,i){K(t),i.open=!0;const{app:n,pages:l}=t;i.style=n?n.style:null,l&&e&&(i.splitPage=l[e])}const He=Y({inject:["container"],props:["page","paths","attrs"],data(){const[e,...t]=this.paths,i={subPaths:t,level:100,open:!1,style:void 0,splitPage:void 0,subAttrs:void 0,currentAttrs:void 0};e?i.subAttrs=this.attrs:i.currentAttrs=this.attrs;const{page:n}=this;return n.__asyncLoader?n.__asyncLoader().then(l=>fe(e,l,this)):fe(e,n,i),i},methods:{afterLeave(){const{$parent:e}=this;e.splitPage=void 0,e.subPaths=[]}},watch:{paths(e){const[t,...i]=e,{app:n,pages:l}=this.page;if(this.style=n?n.style:null,t&&l){const o=l[t];if(o){K(o),this.subAttrs=this.attrs,this.subPaths=i,this.splitPage=o;return}else this.currentAttrs=this.attrs}else this.currentAttrs=this.attrs;this.subPaths=[],this.splitPage=void 0}},mounted(){const{container:e}=this;e.app.flex===!0?e.app.flex=!1:this.splitPage===void 0&&e.split&&this.$nextTick(()=>{const t=e.$refs.mount.childElementCount*100;t>e.level&&e.setLevel(t)})},unmounted(){if(this.splitPage===void 0){const{container:e}=this;if(e.split){const t=e.$refs.mount.childElementCount*100;t<e.level&&e.setLevel(t)}}}});function Qe(e,t,i,n,l,o){const s=C("container"),h=C("Child",!0);return f(),b(E,null,[O(j,{name:"fade",onAfterLeave:e.afterLeave},{default:I(()=>[e.open?(f(),k(s,{key:0,class:"child-container",style:N(e.style),level:e.level},{default:I(()=>[d("div",{class:"page scroll-y",onBack:t[0]||(t[0]=se(m=>e.open=!1,["stop"]))},[(f(),k(Q(e.page),ie(ne(e.currentAttrs)),null,16))],32)]),_:1},8,["style","level"])):_("",!0)]),_:1},8,["onAfterLeave"]),e.splitPage?(f(),k(h,{key:0,paths:e.subPaths,page:e.splitPage,attrs:e.subAttrs},null,8,["paths","page","attrs"])):_("",!0)],64)}const Ke=q(He,[["render",Qe],["__scopeId","data-v-2f5ed70f"]]),Ue=Y({props:["entry","pages","paths","style"],components:{Inline:Ge,Child:Ke},setup({paths:e,pages:t}){const[i,...n]=e;ye("router").pagesInstance=de().ctx;const l={subPaths:n,attrs:void 0,subAttrs:void 0,splitPage:void 0,inlinePage:void 0};if(i){const o=t[i];o?o.inline===!0?l.inlinePage=o:l.splitPage=o:(l.subPaths=[],l.splitPage=Ie)}return we(l)},methods:{router(e,t){const{pages:i}=this,[n,...l]=e,o=i[n];o?(this.subAttrs=t,this.subPaths=l,o.__asyncLoader?o.__asyncLoader().then(s=>{i[n]=s,o.inline===!0?this.inlinePage=s:this.splitPage=s}):o.inline===!0?this.inlinePage=o:this.splitPage=o):(this.subPaths=[],this.attrs=t,this.subAttrs=void 0,this.inlinePage=void 0,this.splitPage=void 0)}}});const Je={class:"page scroll-y"};function Ze(e,t,i,n,l,o){const s=C("Inline"),h=C("container"),m=C("Child");return f(),b(E,null,[O(h,{class:"entry-container",style:N(e.style),level:"100"},{default:I(()=>[d("div",Je,[(f(),k(Q(e.entry),ie(ne(e.attrs)),null,16))]),e.inlinePage?(f(),k(s,{key:0,page:e.inlinePage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):_("",!0)]),_:1},8,["style"]),e.splitPage?(f(),k(m,{key:0,page:e.splitPage,paths:e.subPaths,attrs:e.subAttrs},null,8,["page","paths","attrs"])):(f(),k(h,{key:1,class:"child-container empty"}))],64)}const xe=q(Ue,[["render",Ze],["__scopeId","data-v-897c64a0"]]),X=Ee({QRCode:{en:"Scan Code",zh:"\u4E8C\u7EF4\u7801"},split:{en:"Split Mode",zh:"\u5206\u5C4F\u6A21\u5F0F"},single:{en:"Single Mode",zh:"\u5355\u5C4F\u6A21\u5F0F"},autoScreen:{en:"Auto",zh:"\u81EA\u9002\u5E94"},fullScreen:{en:"Fullscreen",zh:"\u5168\u5C4F\u663E\u793A"},multi:{en:"Multiple",zh:"\u590D\u5236\u5E94\u7528"},copy:{en:"Copy Link",zh:"\u590D\u5236\u94FE\u63A5"},newTab:{en:"New Tab",zh:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00"},reload:{en:"Reload",zh:"\u5237\u65B0"},back:{en:"Back",zh:"\u8FD4\u56DE"},share:{en:"Share",zh:"\u5206\u4EAB"},close:{en:"Close App",zh:"\u5173\u95ED\u5E94\u7528"},drag:{en:"Drag up and down to sort",zh:"\u4E0A\u4E0B\u62D6\u52A8\u6392\u5E8F"}}),et={100:z[100],200:z[200],300:z[300],400:z[400],500:z[500]},tt=Y({components:{IFrame:je},props:["options"],setup({options:e}){const{app:t}=e,{split:i=!1,level:n=100,style:l={}}=t,o=$e(void 0),{ctx:s}=de();return{app:t,langs:X,levels:et,overview:W,controlbar:D,style:be(l),single:S(!0),split:S(i),splitSwitch:S(!1),level:S(n),displays:S(!1),init:S(!1),reload:S(!0),loading:S(!0),maskComponent:o,buttons:[{icon:"ficon-reload",name:X.reload,action(){s.onreload()}},{icon:"ficon-copy",name:X.multi,action(){s.onmulti()}},{icon:"ficon-erweima",name:X.QRCode,action(){s.openMask("mask/qrcode")}},{icon:"ficon-link",name:X.copy,action(){s.oncopy()}},{icon:"ficon-icons_send",name:X.share,action(){s.openMask("mask/share")}}]}},computed:{href(){const{url:e}=this.options;return`${ze}/#${e}`}},methods:{open:De,openBlank:Oe,onmulti(){this.multiId?this.multiId++:this.multiId=1;const e={...this.options,referer:this};e.url+=`?mid=${this.multiId}`,Me(e)},async oncopy(){navigator.clipboard?(await navigator.clipboard.writeText(this.href),pe.success(oe({en:`Copy Success\b ${this.href}`,zh:`\u590D\u5236\u6210\u529F\b ${this.href}`}))):pe.error(oe({en:"Copy Failed",zh:"\u590D\u5236\u5931\u8D25"}))},onclose(){Xe(this)},timeouCloseResize(){const e=te?3e3:1200;clearTimeout(this.clearTimeouId),this.clearTimeouId=setTimeout(()=>this.displays=!1,e)},clearResizeTimeouID(){clearTimeout(this.clearTimeouId)},closeResizeView(e){this.controlbar?this.controlbar=!1:e.target===e.currentTarget&&(this.displays=!1)},drawer(){this.controlbar=!0},openMask(e){ae(e).then(t=>this.maskComponent=t)},closeMask(){this.maskComponent=void 0},context(){return this},setWidth(e){let i=H()-(this.left+e),n=e-this.width;i<0?n+=i:i=0,this.width=e,this.$el.style.width=`${e}px`;for(const l in w){const o=w[l];o.left>this.left?o.left+=n:o.left+=i;const{style:s}=o.$el;s.transition="",s.transform=`translate3d(${o.left}px, 0, 0)`}},setLevel(e){const t=z[e];this.level=Number(e);const i=this.level/100-1;this.setWidth(t+i)},onSplit(e){this.single||(this.split=e,e?this.setLevel(this.$refs.mount.childElementCount*100):(this.level=100,this.setWidth(T)))},fullScreen(){const[e]=v.initOptions.apps.padding,i=H()-e,n=e-this.left,l=n-(this.width-i);this.width=i,this.level=U(i),this.$el.style.width=`${i}px`;for(const o in w){const s=w[o],{style:h}=s.$el;s.left<=this.left?s.left+=n:s.left+=l,h.transition="",h.transform=`translate3d(${s.left}px, 0, 0)`}},autoScreen(){let e=100;const{app:t}=this;t.iframe?t.level&&(e=t.level):this.split&&(e=this.$refs.mount.childElementCount*100),this.level=e;const i=z[e],n=this.width-i;this.width=i,this.$el.style.width=`${i}px`;for(const l in w){const o=w[l],{style:s}=o.$el;o.left>this.left&&(o.left-=n),s.transition="",s.transform=`translate3d(${o.left}px, 0, 0)`}},autoAlign(){const e=H(),[t]=v.initOptions.apps.padding;t+this.width===e?this.autoScreen():this.fullScreen()},initResize(){let e=0,t=0;const{$apps:i}=v,{style:n}=this.$el,l=new he(this.$refs.resize,{angle:20});te===!1&&l.on("start",()=>ee.display=""),l.on("lock",()=>{l.dir==="X"?(clearTimeout(this.clearTimeouId),e=this.$el.clientWidth,n.transition="unset",this.originlLeft=this.left,this.displays=!0):(W.value=!0,ee.cursor="col-resize",t=l.clientX,i.style.transformOrigin=`${l.clientX}px 50%`,x.emit("sidebar.switch",!1))}),l.on("level",()=>{const{move:s}=l;e+=s;const h=this.originlLeft-this.left;if(e>T){if(h===0)for(const m in w){const c=w[m];c.left>this.left&&(c.left+=s);const{style:r}=c.$el;r.transition="unset",r.transform=`translate3d(${c.left}px, 0, 0)`}else{const m=this.left+this.width,c=l.current-m;e=l.current-this.originlLeft;for(const r in w){const a=w[r];a.left>this.left?a.left+=c:a.left+=h;const{style:p}=a.$el;p.transition="unset",p.transform=`translate3d(${a.left}px, 0, 0)`}}if(n.width=`${e}px`,this.level=U(e),this.width=e,this.single===!1){const{children:m}=this.$refs.mount;for(const c of m){const r=String(U(c.clientWidth));r!==c.getAttribute("level")&&c.setAttribute("level",r)}}}else{const m=Math.ceil(Math.abs((e-T)/15))||1;if(this.width===T)v.swiper.move(s/m);else{this.level=100;const c=T-this.width,a=(s-c)/m,p=a+c;e=T,n.width=`${T}px`,this.width=T;for(const u in w){const y=w[u];y.left>this.originlLeft?y.left+=p:y.left+=a;const{style:$}=y.$el;$.transition="unset",$.transform=`translate3d(${y.left}px, 0, 0)`}}}}),l.on("vertical",s=>{const{current:h,start:m,clientX:c}=l,r=c-t;v.swiper.move(r*3),t=c}),l.on("end",()=>{if(l.dir==="X"){const s=this.originlLeft-this.left;s&&v.swiper.scroll(s),this.timeouCloseResize()}});let o=0;l.on("click",s=>{this.displays=!0,this.controlbar=!1,this.timeouCloseResize(),s.timeStamp-o<300&&this.autoAlign(),o=s.timeStamp})},async onreload(){this.reload=!1,this.loading=!0,await V(),this.reload=!0,await V(),this.createApp&&this.createApp()},onIFrameLoad(e){this.loading=!1,e(this)}},async mounted(){var m;await V(),this.initResize();let e=z[this.level];const t=H(),[i]=v.initOptions.apps.padding,{options:n,app:l}=this,{referer:o}=n;if(o){let c=o.left+o.width;const r=t-(c+e);r<0&&(c+=r,v.swiper.scroll(r)),this.left=c>i?c:i}else{const c=Object.values(w);if(c.length){let r,a,p,u=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER;for(const g of c)g.left<u&&(r=g,u=g.left),g.left>$&&($=g.left,$+g.width<=t&&(p=g)),g.left>y&&(a=g,y=g.left);if(a.left<0){this.left=i;const g=i-(a.left+a.width);v.swiper.scroll(g)}else if(p){let g=p.left+p.width;const M=t-(g+e);M<0&&(g+=M,v.swiper.scroll(M)),this.left=g}else{const g=i-r.left;v.swiper.scroll(g),this.left=i}}else{const r=(m=v.initOptions.apps)==null?void 0:m.float;this.left=r==="right"?t-e:i}}if(l.flex===!0){const c=z[400],r=t-this.left;r<c?e=r:e=c}this.width=e;const{style:s}=this.$el;s.opacity=0,s.width=`${e}px`,s.transition="unset";const h=this.left-100;s.transform=`translate3d(${h}px, 0, 0)`,requestAnimationFrame(()=>{s.opacity=1,s.transition="",s.transform=`translate3d(${this.left}px, 0, 0)`});for(const c in w){const r=w[c];r.left>=this.left&&(r.left+=e,Object.assign(r.$el.style,{transition:"",transform:`translate3d(${r.left}px, 0, 0)`}))}if(w[n.url]=this,l.src){const c=await ae(l.src);if(c.app){Object.assign(l,c.app);const{name:u,color:y,icon:$}=c.app;u&&(n.name=u),y&&(n.color=y),$&&(n.icon=$)}this.init=!0;const{level:r}=this;let a;const p={instance:this,level:r};if(c.install===void 0){const{pages:u}=c,{style:y}=l;if(u){let{paths:$}=n;$?$.shift():$=[],a={entry:c,pages:u,paths:$,style:y},this.single=!1;let g=!1;for(const M in u){const{__asyncLoader:le,inline:me}=u[M];le?le().then(ve=>{g===!1&&ve.inline===void 0&&(g=!0,this.split=!0,this.splitSwitch=!0)}):me===void 0&&(g=!0)}g&&(this.split=!0,this.splitSwitch=!0),Object.assign(p,xe)}else this.split=!1,Object.assign(p,c),y&&Object.assign(this.style,y);await V(),this.createApp=()=>{this.loading=!1;const $=ke(p,a);$.use(Ne);const g=this.$refs.mount,M=new We({app:$,options:n,el:g,container:this});this.router=M,$.provide("container",this),$.provide("router",M),this.pages=$.mount(g)}}else await V(),this.createApp=()=>{this.loading=!1;const u=this.$refs.mount;c.install(u,{app:this})};this.createApp()}Fe(n),v.initComponentPromise&&(await v.initComponentPromise,v.initComponentPromise=void 0),x.emit("opened",n)}});const R=e=>(_e("data-v-5f1245ae"),e=e(),Pe(),e),st={class:"title"},it=["level"],nt={class:"view-resize"},lt=R(()=>d("i",{class:"ficon-auto"},null,-1)),ot=R(()=>d("i",{class:"ficon-fullscreen"},null,-1)),at=R(()=>d("i",{class:"ficon-pages_outlined"},null,-1)),rt=R(()=>d("i",{class:"ficon-fenping1"},null,-1)),ct=R(()=>d("div",{class:"view-mask",event:"mask"},null,-1)),pt={class:"header item"},ut={class:"title"},ft=["title"],dt=R(()=>d("i",{class:"ficon-xinchuangkou"},null,-1)),ht=[dt],mt={key:1,class:"button"},vt=R(()=>d("i",{class:"ficon-up"},null,-1)),gt=[vt],yt={class:"buttons"},wt=["onClick"],$t=["title"],bt=R(()=>d("i",{class:"ficon-cha"},null,-1)),kt=[bt];function _t(e,t,i,n,l,o){const s=C("titlebar"),h=C("container"),m=C("IFrame"),c=C("resize"),r=C("app");return f(),k(r,{class:P({overview:e.overview})},{default:I(()=>[e.overview?(f(),k(s,{key:0},{default:I(()=>[d("div",st,[e.app.icon?(f(),b("i",{key:0,class:P(e.app.icon),style:N({color:e.app.color})},null,6)):_("",!0),d("span",null,F(e.app.name),1)])]),_:1})):_("",!0),d("view",{class:P({loading:e.loading}),style:N(e.style)},[e.reload?(f(),k(j,{key:0,name:"fade",appear:""},{default:I(()=>[e.app.src?(f(),b(E,{key:0},[e.init?(f(),b(E,{key:0},[e.single?(f(),k(h,{key:0,class:"mount scroll-y",level:e.level,ref:"mount",onBack:e.onclose},null,8,["level","onBack"])):(f(),b("div",{key:1,class:P(["mount",[e.split?"flat":"fixed"]]),ref:"mount",onBack:t[0]||(t[0]=(...a)=>e.onclose&&e.onclose(...a))},null,34))],64)):_("",!0)],64)):e.app.iframe?(f(),k(m,{key:1,src:e.app.iframe,gesture:e.app.gesture,onLoad:e.onIFrameLoad},null,8,["src","gesture","onLoad"])):_("",!0)]),_:1})):_("",!0),O(j,{name:"fade",appear:""},{default:I(()=>[e.maskComponent?(f(),k(Q(e.maskComponent),{key:0,context:e.context},null,8,["context"])):_("",!0)]),_:1}),d("div",{class:P({controlbar:e.controlbar,displays:e.displays}),onMouseenter:t[10]||(t[10]=(...a)=>e.clearResizeTimeouID&&e.clearResizeTimeouID(...a)),onMouseleave:t[11]||(t[11]=(...a)=>e.timeouCloseResize&&e.timeouCloseResize(...a))},[d("div",{class:"view-display",onClick:t[6]||(t[6]=(...a)=>e.closeResizeView&&e.closeResizeView(...a))},[d("div",{class:"view-levels",onClick:t[1]||(t[1]=a=>e.setLevel(a.target.getAttribute("level")))},[(f(!0),b(E,null,Z(e.levels,(a,p)=>(f(),b("div",{key:p,level:p,class:P({active:p<=e.level})},F(p)+"% ",11,it))),128))]),d("div",nt,[d("div",{class:"auto-resize",onClick:t[2]||(t[2]=(...a)=>e.autoScreen&&e.autoScreen(...a))},[lt,G(" "+F(e.langs.autoScreen),1)]),d("div",{class:"full-screen",onClick:t[3]||(t[3]=(...a)=>e.fullScreen&&e.fullScreen(...a))},[ot,G(" "+F(e.langs.fullScreen),1)])]),e.splitSwitch?(f(),b("div",{key:0,class:P(["view-mode",{split:e.split}])},[d("div",{class:"single-mode",onClick:t[4]||(t[4]=a=>e.onSplit(!1))},[at,G(" "+F(e.langs.single),1)]),d("div",{class:"split-mode",onClick:t[5]||(t[5]=a=>e.onSplit(!0))},[rt,G(" "+F(e.langs.split),1)])],2)):_("",!0)]),ct,d("div",{class:"view-drawer",onClick:t[8]||(t[8]=(...a)=>e.drawer&&e.drawer(...a))},[d("div",pt,[d("div",ut,[e.app.icon?(f(),b("i",{key:0,class:P(e.app.icon),style:N({color:e.app.color})},null,6)):_("",!0),d("span",null,F(e.app.name),1)]),e.controlbar?(f(),b("div",{key:0,class:"button",title:e.langs.newTab,onClick:t[7]||(t[7]=a=>e.openBlank(e.options.url))},ht,8,ft)):(f(),b("div",mt,gt))]),d("div",yt,[(f(!0),b(E,null,Z(e.buttons,({name:a,icon:p,action:u})=>(f(),b("div",{class:"button",onClick:u},[d("i",{class:P(p)},null,2),d("span",null,F(a),1)],8,wt))),256))])]),d("div",{class:"bottom-line",title:e.langs.drag},null,8,$t),d("div",{class:"close",onClick:t[9]||(t[9]=se((...a)=>e.onclose&&e.onclose(...a),["stop"]))},kt)],34)],6),O(c,{ref:"resize"},null,512)]),_:1},8,["class"])}const Pt=q(tt,[["render",_t],["__scopeId","data-v-5f1245ae"]]),Ct=Y({__name:"index",setup(e){const t=Ce(()=>ge(()=>import("./guide.js"),["platform/split/float/guide.js","platform/export-helper.js"])),i=S(!1),{initOptions:n}=v,{apps:l}=n;n.app&&B.push(n);const{urls:o,float:s="left"}=l;if(o)for(const r of o){const a=re(r);a&&!B.includes(a)&&(a.paths=r.split("/"),B.push(a))}if(l.padding===void 0&&(l.padding=[3,0]),J&&J.length)for(const r of J){const a=re(r);a&&!B.includes(a)&&(a.paths=r.split("/"),B.push(a))}B.length===0&&(A.value=!1);function h(){const r={37(){A.value===!1?(A.value=!0,requestAnimationFrame(()=>{v.swiper.move(-1),v.swiper.next()})):(v.swiper.move(-1),v.swiper.next())},39(){A.value===!1?(A.value=!0,requestAnimationFrame(()=>{v.swiper.move(1),v.swiper.previous()})):(v.swiper.move(1),v.swiper.previous())},65(){x.emit("sidebar.switch")},67(){ce()},83(){A.value=!A.value},112(p){p.preventDefault(),i.value=!i.value}};let a;document.addEventListener("keydown",p=>{const{keyCode:u}=p,y=r[u];y&&a===void 0&&(a=u,p.target.validity===void 0&&y(p))}),document.addEventListener("keyup",p=>{a===p.keyCode&&(a=void 0)})}const m=S();Le(()=>{const r=m.value;v.$apps=r,Ve(r),h(),localStorage.guideState===void 0&&setTimeout(()=>i.value=!0,2e3)});function c(r){"validity"in r.target||(r.preventDefault(),ce())}return(r,a)=>(f(),b(E,null,[d("div",{class:P(["apps-mask full",{active:L(A)&&L(D),overview:L(A)&&L(W)}])},null,2),O(j,{name:"fade"},{default:I(()=>[Ae(d("section",{class:P(["apps split",{control:L(D),overview:L(W),[L(s)]:!0}]),ref_key:"$apps",ref:m,onContextmenu:c},[(f(!0),b(E,null,Z(L(B),p=>(f(),k(Pt,{key:p.url,options:p},null,8,["options"]))),128))],34),[[Se,L(A)]])]),_:1}),O(j,{name:"fade",appear:""},{default:I(()=>[i.value?(f(),k(L(t),{key:0,onClose:a[0]||(a[0]=p=>i.value=!1)})):_("",!0)]),_:1})],64))}});const Ot=q(Ct,[["__scopeId","data-v-562ea78b"]]);export{Ot as default};

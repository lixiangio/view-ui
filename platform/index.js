import{defineAsyncComponent as E,createApp as _}from"/libs/vue.js";import a,{mode as f,pathname as y,urls as g,Lang as d}from"/libs/view.js";import{message as m}from"/libs/viewui.js";import L from"/libs/network.js";const w=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}};w();const D="modulepreload",v=function(s){return"/"+s},l={},u=function(r,o,c){return!o||o.length===0?r():Promise.all(o.map(e=>{if(e=v(e),e in l)return;l[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":D,t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t)return new Promise((p,h)=>{i.addEventListener("load",p),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>r())},A=`/${a.dataSource}?mode=${f}&p=${y}`;a.initDataPromise=L.get(A).then(s=>{for(const r of s){const{url:o}=r;if(typeof o=="string"){g[o]=r;const c=r.main||r.app||r.custom;if(c){const{name:e,icon:t,color:n}=c;r.name=e,r.icon=t,r.color=n}}}return s});const P=E(()=>u(f==="single"?()=>import("./single/index.js"):()=>import("./multi/index.js"),["platform/multi/index.js","platform/export-helper.js"])),F=_(P);F.mount(document.body);window.addEventListener("load",()=>u(()=>import("./install.js"),[]));window.addEventListener("offline",()=>{m.warning(d({en:"Network offline",zh:"\u7F51\u7EDC\u8FDE\u63A5\u5DF2\u65AD\u5F00"}))});window.addEventListener("online",()=>{m.success(d({en:"Network connection success",zh:"\u7F51\u7EDC\u8FDE\u63A5\u5DF2\u6062\u590D"}))});export{u as _};
